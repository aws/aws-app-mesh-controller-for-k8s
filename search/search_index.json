{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#aws-app-mesh-controller-for-k8s","title":"AWS App Mesh Controller For K8s","text":"<p>AWS App Mesh Controller For K8s is a controller to help manage App Mesh resources for a Kubernetes cluster and injecting sidecars to Kubernetes Pods.  The controller watches custom resources for changes and reflects those changes into the App Mesh API. The controller maintains the custom resources (CRDs): meshes, virtualnodes, virtualrouters, virtualservices, virtualgateways and gatewayroutes.  The custom resources map to App Mesh API objects.</p> <p>Note: For v0.5.0 or older versions of the controller, please refer to legacy-controller branch</p>"},{"location":"#security-disclosures","title":"Security disclosures","text":"<p>If you think you\u2019ve found a potential security issue, please do not post it in the Issues.  Instead, please follow the instructions here or email AWS security directly.</p>"},{"location":"#documentation","title":"Documentation","text":"<p>Checkout our Live Docs!</p>"},{"location":"guide/development/","title":"App Mesh Controller Development Guide","text":""},{"location":"guide/development/#prerequisites","title":"Prerequisites","text":"<ul> <li>Go 1.13+</li> <li>Docker</li> <li>Make</li> <li>jq</li> </ul>"},{"location":"guide/development/#building-the-controller","title":"Building the Controller","text":"<p>The controller Docker image can be built via:</p> <pre><code>AWS_REGION=&lt;region&gt; AWS_ACCOUNT=&lt;account ID&gt; make docker-build\n</code></pre> <p>This command will compile the controller, run unit tests, and generate a Docker image using the ECR repository format (e.g. <code>&lt;account ID&gt;.dkr.ecr.&lt;region&gt;.amazonaws.com/amazon/appmesh-controller</code>).</p> <p>The image can be pushed to your local ECR repository via:</p> <pre><code>AWS_REGION=&lt;region&gt; AWS_ACCOUNT=&lt;account ID&gt; make docker-push\n</code></pre> <p>Once the image has been pushed, you can run the following to install the controller and CRDs to your configured cluster (defined in <code>~/.kube/config</code>):</p> <pre><code>AWS_REGION=&lt;region&gt; AWS_ACCOUNT=&lt;account ID&gt; make deploy\n</code></pre>"},{"location":"guide/development/#building-for-app-mesh-preview","title":"Building for App Mesh Preview","text":"<p>Important: The preview version of the controller will not work against App Mesh's production environment (and vice versa). App Mesh's endpoint and signing name are chosen during the build process.</p> <p>When working against the App Mesh Preview environment, the preview SDK models are downloaded and used to generate the AWS SDK for Go dynamically. The steps for building and deploying the controller are the same as above, but with two new variables for the <code>docker-build</code> step.</p> <pre><code>AWS_REGION=&lt;region&gt; AWS_ACCOUNT=&lt;account ID&gt; APPMESH_SDK_OVERRIDE=y APPMESH_PREVIEW=y make docker-build\n</code></pre>"},{"location":"guide/installation/","title":"AppMesh Installation Guide","text":""},{"location":"guide/installation/#via-helm","title":"Via Helm","text":"<p>Follow instructions in appmesh-controller helm chart.</p>"},{"location":"guide/monitoring/","title":"AppMesh Monitoring Guide","text":"<p>AppMesh controller supports monitoring the control plane with Prometheus and Grafana.</p>"},{"location":"guide/monitoring/#install-prometheus","title":"Install Prometheus","text":"<p>Follow instructions in appmesh-prometheus helm chart.</p>"},{"location":"guide/monitoring/#install-grafana","title":"Install Grafana","text":"<p>Follow instructions in appmesh-grafana helm chart.</p>"},{"location":"guide/tracing/","title":"AppMesh Tracing Guide","text":"<p>AppMesh controller supports integration with multiple tracing solutions for data plane.</p>"},{"location":"guide/tracing/#aws-x-ray","title":"AWS X-Ray","text":"<ol> <li> <p>Enable X-Ray tracing for the App Mesh data plane     <pre><code>helm upgrade -i appmesh-controller eks/appmesh-controller \\\n--namespace appmesh-system \\\n--set tracing.enabled=true \\\n--set tracing.provider=x-ray\n</code></pre>     The above configuration will inject the AWS X-Ray daemon sidecar in each pod scheduled to run on the mesh.</p> <p>You can optionally use a specific X-Ray image by setting the following flags in addition to the above: <pre><code>    --set xray.image.repository=public.ecr.aws/xray/aws-xray-daemon \\\n--set xray.image.tag=3.3.3\n</code></pre></p> </li> </ol> <p>Note: You should restart all pods running inside the mesh after enabling tracing.</p>"},{"location":"guide/tracing/#datadog-tracing","title":"Datadog tracing","text":"<ol> <li>Install the Datadog agent in the <code>appmesh-system</code> namespace</li> <li>Enable Datadog Tracing for the App Mesh data plane     <pre><code>helm upgrade -i appmesh-controller eks/appmesh-controller \\\n--namespace appmesh-system \\\n--set tracing.enabled=true \\\n--set tracing.provider=datadog \\\n--set tracing.address=datadog.appmesh-system \\\n--set tracing.port=8126\n</code></pre></li> </ol> <p>Note: You should restart all pods running inside the mesh after enabling tracing.</p>"},{"location":"guide/tracing/#jaeger-tracing","title":"Jaeger tracing","text":"<p>Follow instructions in appmesh-jaeger helm chart.</p>"},{"location":"guide/tracing/#tips","title":"Tips","text":""},{"location":"guide/tracing/#tracing-agents-running-as-daemonsets","title":"Tracing agents running as DaemonSets","text":"<p>For Jaeger and Datadog, running tracing agents as DaemonSets will need the <code>tracing.address</code> set to <code>status.hostIP</code> to use the node's IP. To do this, use the flag below    <pre><code>--set tracing.address=ref:status.hostIP\n</code></pre></p>"},{"location":"guide/troubleshooting/","title":"AppMesh Troubleshooting Guide","text":""},{"location":"guide/troubleshooting/#common-errors","title":"Common Errors","text":""},{"location":"guide/troubleshooting/#exceeded-pod-count-per-virtualnodevirtualgateway-limit","title":"Exceeded pod count per VirtualNode/VirtualGateway limit","text":"<p>AppMesh limits pod count per virtualNode and virtualGateway. By default the limit is 50.</p> <p>Your can adjust this limit by adjust the \"Connected Envoy processes per virtual node\" service quota.</p>"},{"location":"guide/troubleshooting/#namespaces-is-not-labeled-correctly","title":"Namespaces is not labeled correctly","text":"<p>Namespaces must be labeled with two kind of labels:</p> <ul> <li><code>appmesh.k8s.aws/sidecarInjectorWebhook: enabled</code> is required on namespaces where pod should be injected with envoy sidecars.</li> <li>customized labels to make <code>mesh</code> CustomResource selects the namespace via <code>mesh.spec.namespaceSelector</code>. (optional if you have a single Mesh selects all namespaces)</li> </ul>"},{"location":"guide/troubleshooting/#troubleshooting","title":"Troubleshooting","text":"<p>Tail the controller logs:</p> <pre><code>export APPMESH_SYSTEM_NAMESPACE=appmesh-system\nkubectl logs -n \"${APPMESH_SYSTEM_NAMESPACE}\" -f --since 10s \\\n$(kubectl get pods -n \"${APPMESH_SYSTEM_NAMESPACE}\" -o name | grep controller)\n</code></pre> <p>Tail envoy logs:</p> <pre><code>export APPLICATION_NAMESPACE=&lt;your namespace&gt;\nexport APPLICATION=&lt;your pod or deployment&gt; # i.e. deploy/my-app\nkubectl logs -n \"${APPLICATION_NAMESPACE} \"${APPLICATION_POD}\" envoy -f --since 10s\n</code></pre> <p>View envoy configuration:</p> <pre><code>export APPLICATION_NAMESPACE=&lt;your namespace&gt;\nexport APPLICATION=&lt;your pod&gt;\nkubectl port-forward -n \"${APPLICATION_NAMESPACE}\" \\\n$(kubectl get pod -n \"${APPLICATION_NAMESPACE}\" | grep \"${APPLICATION}\" |awk '{print $1}') \\\n9901\n</code></pre> <p>Then navigate to <code>localhost:9901/</code> for the index or <code>localhost:9901/config_dump</code> for the envoy config.</p>"},{"location":"guide/troubleshooting/#virtualgateway-common-issues","title":"VirtualGateway - Common Issues","text":"<p><pre><code>\"failed to find matching virtualGateway for gatewayRoute: gateway-route-headers, expecting 1 but found 0\"\n</code></pre> The above error message is to inform the user that the GatewayRoute in the error message has not been associated with any VirtualGateway. So the user should either add matching gatewayRouteSelector to the unmatched gatewayRoute or completely remove the gatewayRouteSelector so that the VirtualGateway ignores this field and uses only the namespaceSelector.For more details refer LiveDocs Virtual Gateway section</p>"},{"location":"guide/troubleshooting/#mtls-common-issues","title":"mTLS - Common Issues","text":""},{"location":"guide/troubleshooting/#envoy-fails-to-boot-up-when-sds-based-mtls-is-enabled","title":"Envoy fails to boot up when SDS based mTLS is enabled","text":"<p>When SDS based mTLS is enabled at the controller level via <code>enable-sds</code> flag, controller expects to find SDS Provider\u2019s UDS at path specified by <code>sds-uds-path</code>. It is set to a default value of <code>/run/spire/sockets/agent.sock</code> which is the default SPIRE Agent\u2019s UDS path. Make sure that SDS Provider on the local node is up and running and UDS is active. Currently, SPIRE is the only supported SDS provider. Please check if SPIRE Agent is up and running on the same node as the problematic Envoy.</p> <p>You can use the below command to figure out the exact reason of the envoy bootup issue. If the error is due to not being able to mount SDS provider's UDS socket then you would need to address that.</p> <pre><code>kubectl describe pod &lt;pod-name&gt; -n &lt;namespace-name&gt;\n</code></pre>"},{"location":"guide/troubleshooting/#pod-is-up-and-running-but-envoy-doesnt-have-any-certs-in-sds-mode","title":"Pod is up and running but Envoy doesn\u2019t have any certs in SDS mode.","text":"<ol> <li>To begin with, check if <code>APPMESH_SDS_SOCKET_PATH</code> env variable is present under Envoy and if it has the correct UDS path value. If it is missing, then the controller didn\u2019t inject the env variable. Check if <code>enable-sds</code> is set to <code>true</code> for the controller.</li> </ol> <p>For example, when using SPIRE Agent you should see something like below in Envoy.</p> <pre><code>APPMESH_SDS_SOCKET_PATH:      /run/spire/sockets/agent.sock\n</code></pre> <ol> <li>If the above env variable is present with the correct value, then check if Envoy is able to communicate with the SDS Provider. Below command will help verify if the Envoy is able to reach out to the local SDS Provider via the UDS path passed in to the controller and also to see if it is healthy.</li> </ol> <pre><code>kubectl exec -it &lt;pod-name&gt; -n &lt;namespace-name&gt; -c envoy -- curl http://localhost:9901/clusters | grep -E '(static_cluster_sds.*cx_active|static_cluster_sds.*healthy)'\n\nstatic_cluster_sds_unix_socket::/run/spire/sockets/agent.sock::cx_active::1\nstatic_cluster_sds_unix_socket::/run/spire/sockets/agent.sock::health_flags::healthy\n</code></pre> <ol> <li>If the SDS cluster is healthy in Envoy, then check if the workload entry tied to this particular Pod/app container is registered with SPIRE Server and if the selectors match. Use the below command to list out all the registered workload entries.</li> </ol> <p><pre><code>kubectl exec -n spire spire-server-0 -- /opt/spire/bin/spire-server entry show\n</code></pre> Once you have the list of entries, check for the entry that is tied to the app container and check if the selectors match. Default selectors that we currently use are pod\u2019s service account, namespace and labels.</p>"},{"location":"guide/troubleshooting/#pod-liveness-and-readiness-probes-fail-when-mtls-is-enabled","title":"Pod liveness and readiness probes fail when mTLS is enabled","text":"<p>HTTP and TCP health checks from the kubelet will not work as is, if mutual TLS is enabled as the kubelet doesn't have relevant certs.</p> <p>Workarounds:</p> <ol> <li>Expose the health check endpoint on a different port and skip mTLS for that port. You can then set <code>appmesh.k8s.aws/ports</code> annotation with the application port value on the deployment spec.</li> </ol> <p>Example: If your main application port is 8080 and if health check endpoint is exposed on 8081, then <code>appmesh.k8s.aws/ports:8080</code> will help bypass mTLS for health check port.</p>"},{"location":"guide/troubleshooting/#sds-cluster-is-present-in-envoys-config-even-though-corresponding-virtualnode-doesnt-have-mtls-sds-config","title":"SDS cluster is present in Envoy's config even though corresponding VirtualNode doesn't have mTLS SDS config","text":"<p>Set <code>appmesh.k8s.aws/sds:disabled</code> for the deployments behind VirtualNodes without SDS config.</p>"},{"location":"reference/api_design/","title":"AppMesh-K8s integration v1beta2 CRD API design","text":""},{"location":"reference/api_design/#introduction","title":"Introduction","text":"<p>AppMesh is a service mesh product offered by Amazon. EKS team owns a controller that provides integration between AppMesh and Kubernetes using a custom resource(CRD) API.</p> <p>This document proposes a new version(v1beta2) of CRD API to address issues in current API design(v1beta1).</p>"},{"location":"reference/api_design/#what-is-the-problem","title":"What is the problem","text":"<p>There are several issues in the old CRD API model. Details in AppMesh-K8s integration API issues. In summary:</p> <ul> <li>The name of Kubernetes resources is tightly coupled with AppMesh names, which is inflexible and confusing.</li> <li>The references between Kubernetes resources is ambiguous and relies on string hacks.</li> <li>The security model for Kubernetes resources is not properly defined.</li> <li>The VirtualNode CRD is implicitly coupled with Deployment resource.</li> <li>The VirtualService cannot directly use VirtualNode as provider</li> </ul>"},{"location":"reference/api_design/#why-is-it-changing","title":"Why is it changing","text":"<p>We plan to announce k8s AppMesh controller as GA, and we should provide a stable and clean API for better customer experience.</p>"},{"location":"reference/api_design/#out-of-scope","title":"Out of scope","text":"<ul> <li>The detailed implementation of new API is not discussed in this doc.</li> </ul>"},{"location":"reference/api_design/#roles","title":"Roles:","text":"<p>This document considers two user role:</p> <ul> <li>Cluster Administrator: The cluster administrator (ops) is responsible for administration of entire clusters. They manage the lifecycle of AppMesh mesh and provide them to application developers.</li> <li>Application Developer: The application developer (dev) is responsible for defining their application configuration and service composition.</li> </ul>"},{"location":"reference/api_design/#use-cases","title":"Use cases:","text":"<ul> <li>As a Cluster Administrator for multi-tenant EKS cluster, I should be able to allocate a service mesh and control which users can create resources in this mesh.</li> <li>As an Application Developer, I should be able to define the service routing logic and backend configuration for my application without Cluster Administrator's intervention.</li> </ul>"},{"location":"reference/api_design/#tenets","title":"Tenets:","text":"<ul> <li>The API should follow Kubernetes API conventions</li> <li>The API should be unambiguous, there should be only one obvious way for given task</li> <li>The API should be explicit instead of rely on implicit logic</li> <li>The API should be simple for 99% use case</li> <li>The API should be open for future extensions</li> </ul>"},{"location":"reference/api_design/#design","title":"Design","text":""},{"location":"reference/api_design/#api-overview","title":"API overview","text":"<p>We\u2019ll use four CRD to represent AppMesh objects:</p> <ul> <li>Mesh: Represents an AppMesh mesh object.</li> <li>VirtualNode: Represents an AppMesh virtualNode object.</li> <li>VirtualService: Represents an AppMesh virtualService object, which can use either VirtualRouter or VirtualNode as provider.</li> <li>VirtualRouter: Represents an AppMesh virtualRouter object and embeds virtualRoute.</li> </ul> <p></p> <p>Detailed changes are discussed below:</p>"},{"location":"reference/api_design/#decouple-k8s-resource-name-from-appmesh-resource-name","title":"Decouple k8s resource name from AppMesh resource name","text":"<p>Resource names for k8s resources should be decoupled from appMesh resource names. Users should be able to freely denote the resource name for k8s resources independently from appMesh resource names. Sensible default for appMesh resource names can be derived from k8s resource name.</p> <ol> <li> <p>Mesh resource have a field \u201cawsName\u201d to denote the AppMesh name for mesh. It defaults to be same as the name of mesh k8s resource.  </p> <p>Note: we may consider use other field name like \u201cmeshName\u201d, \u201cawsMeshName\u201d. we choose \u201cawsName\u201d over simply \u201cname\u201d to avoid confusing.</p> <p>This enables use cases like use same resource name(e.g. \u201cglobal\u201d) for the k8s Mesh resource in different EKS clusters, while maps to different appMesh name.</p> <pre><code>apiVersion: appmesh.k8s.aws/v1beta2\nkind: Mesh\nmetadata:\nname: global\nspec:\nawsName: my-cluster-mesh\n</code></pre> </li> <li> <p>VirtualService resource have a field \u201cawsName\u201d to denote the AppMesh name for VirtualService. It defaults to be  \"$name.$namespace\" of VirtualService k8s resource.</p> <p>Note: the controller is responsible for detecting conflicting awsName with a mesh and report errors.</p> <pre><code>apiVersion: appmesh.k8s.aws/v1beta2\nkind: VirtualService\nmetadata:\nnamespace: my-app-ns\nname: svc-a\nspec:\nawsName: svc-a.my-app-ns\n</code></pre> <p>Alternative designs considered:</p> <ol> <li> <p>Enforce bind appMesh virtualServiceName to be VirtualService resource\u2019s name. (this is existing design used in our controller)     <pre><code>apiVersion: appmesh.k8s.aws/v1beta1\nkind: VirtualService\nmetadata:\nnamespace: my-app-ns\nname: my-app-node.my-app-ns.svc.cluster.local\nspec:\n...\n</code></pre></p> <p>Pros: * the k8s namespace serves as a scope as a weak guarantee for uniqueness  of hostNames. (it\u2019s weak guarantee since there can still be possible hostName conflicts for resources in multiple namespaces)</p> <p>Cons: * harder to extend to multiple hostName support * name of k8s resource tied to appMesh name</p> </li> <li> <p>have an array field \u201chosts\u201d to denote the AppMesh names for VirtualService For each host, we\u2019ll transparently create an appMesh VirtualService object. It defaults to have single entry of the VirtualService resource\u2019s name.     <pre><code>apiVersion: appmesh.k8s.aws/v1beta2\nkind: VirtualService\nmetadata:\nnamespace: my-app-ns\nname: my-app-svc\nspec:\nhosts: - my-app-svc.my-app-ns\n- my-app-svc.my-app-ns.svc.cluster.local\n</code></pre></p> <p>Pros: * user friendly if multiple hostname for a service is desired. (under k8s, a pod can use multiple name to contact a service with the help of DNS search list).</p> <p>Cons: * not align with AppMesh API. (we decided not to do this unless appMesh itself supports such API).</p> </li> </ol> </li> <li> <p>VirtualNode resource can have a field \u201cawsName\u201d to denote the AppMesh name for VirtualNode. It defaults to be \u201c${name}_${namespace}\u201d of the VirtualNode resource.</p> <p>Note: we may consider use other field name like \u201cvirtualNodeName\u201d, \u201cawsVirtualNodeName\u201d. we choose \u201cawsName\u201d over simply \u201cname\u201d to avoid confusing.</p> <p>Note: currently controller use \"-\" as separator when build name, but we plan to change it to \"_\" to avoid conflicts with k8s's naming restrictions.</p> <p>This enables use cases like have different app mesh VirtualNode under different context. e.g. for a mesh designated for a single EKS cluster, the default can be \u201c${name}_${namespace}\u201d. And for a mesh designated to be shared by multiple EKS clusters, the default can be \u201c${name}${namespace}${clusterName}\u201d. The naming pattern can be controlled by immutable attributes on mesh resource in the future(e.g. spec.multiCluster)</p> <pre><code>apiVersion: appmesh.k8s.aws/v1beta2\nkind: VirtualNode\nmetadata:\nnamespace: my-app-ns\nname: node-v1\nspec:\nawsName: node-v1_my-app-ns\n</code></pre> </li> </ol>"},{"location":"reference/api_design/#use-typed-references-to-reference-resources-within-cluster","title":"Use typed references to reference resources within cluster","text":"<p>we can use typed reference for relationship between resources within cluster.</p> <ol> <li> <p>use virtualNodeRef for reference from VirtualRouter to VirtualNode     <pre><code>apiVersion: appmesh.k8s.aws/v1beta2\nkind: VirtualRouter\nmetadata:\nnamespace: my-app-ns\nname: svc-a\nspec:\nawsName: svc-a_my-app-ns\nlisteners:\n- portMapping:\nport: 9080\nprotocol: http\nroutes:\n- name: route-to-auth\nhttp:\nmatch:\nprefix: /auth\naction:\nweightedTargets:\n- virtualNodeRef:\nnamespace: my-app-ns # can be omitted if in same namespace as VirtualRouter\nname: node-v1\nweight: 1\n</code></pre></p> <p>Alternative designs considered:</p> <ol> <li> <p>use mangled name of k8s virtualNode resource. (this is existing design used in our controller)</p> <p>We can use a mangled name of virtualNode resource. like \u201c${nodeName}\u201d when referencing a virtualNode within current namespace and \u201c${nodeName}.${namespace}\u201d when referencing a virtualNode in another namespace.</p> <pre><code>weightedTargets:\n- virtualNodeName: colorteller.appmesh-demo\nweight: 4\n- virtualNodeName: colorteller-blue\nweight: 3\n- virtualNodeName: colorteller-black.appmesh-demo\nweight: 3\n</code></pre> <p>Cons: * VirtualNodeName here is ambiguous. It\u2019s referencing the name of k8s VirtualNode instead of appMesh VirtualNode. * It string hacks by whether there is a \u201c.\u201d inside and use it as name/namespace separator. while \u201c.\u2018 is  valid to be part of name identifier in k8s. * It cannot be extended to support reference external virtualNode in mesh (like a ECS node)</p> </li> <li> <p>use the real name of  appMesh virtualNode.</p> <p>We can use the real name of appMesh virtualNode instead of mangled name of k8s object. The above example will be:</p> <pre><code>weightedTargets:\n- virtualNodeName: colorteller_appmesh-demo\nweight: 4\n- virtualNodeName: colorteller-blue\nweight: 3\n- virtualNodeName: colorteller-black_appmesh-demo\nweight: 3\n</code></pre> <p>Pros:  * unambiguous supported both virtualNode in k8s and external like ECS. * simple implementation</p> <p>Cons: * users need to be aware of the name pattern of appMesh objects when want to reference a virtualNode created within cluster. however, it\u2019s subject to change, e.g. we may include a cluster identifier in appMesh name as well if we plan to support multiple cluster. * not k8s native for reference between objects</p> </li> </ol> </li> <li> <p>[optional, not planned] virtualNodeRef can be extended to support resources outside of k8s cluster. e.g. a ECS virtual node.</p> <p>Note: we using field like \u201cawsName\u201d instead of \u201cvirtualNodeName\u201d to avoid confusing, since \u201cvirtualNodeName\u201d means \u201cname for a k8s virtualNode resource\u201d under k8s\u2019s convention.</p> <p>```yaml apiVersion: appmesh.k8s.aws/v1beta2 kind: VirtualRouter metadata:   namespace: my-app-ns   name: svc-a spec:   awsName: svc-a_my-app-ns   listeners:     - portMapping:         port: 9080         protocol: http   routes:     - name: route-to-auth       http:         match:           prefix: /auth         action:           weightedTargets:             - virtualNodeRef:                 awsName: my-ecs-node               weight: 1 1. use virtualServiceRef for references from VirtualNode to VirtualService</p> <pre><code>apiVersion: appmesh.k8s.aws/v1beta1\nkind: VirtualNode\nmetadata:\nnamespace: my-app-ns\nname: my-app-node\nspec:\n...other fileds...\nbackends:\n- virtualService:\nvirtualServiceRef:\nnamespace: my-app-ns # can be omitted if in same namespace as VirtualNode\nname: my-app-svc\n</code></pre> <p>Alternative designs considered:</p> <ol> <li> <p>use the real name of appMesh virtualService. (this is existing design used in our controller)</p> <p>We can use the real name of appMesh virtualService when referencing it in nodes.</p> <p>Pros: * unambiguous supported both virtualService in k8s and external like ECS. * simple implementation</p> <p>Cons: * not k8s native for reference between objects * not consistent with how we reference nodes from services.</p> </li> </ol> </li> <li> <p>[optional, not planned] virtualServiceRef can be extended to support resources outside of k8s cluster. e.g. a ECS virtual service.</p> <p>Note: we are using field like \u201cawsName\u201d instead of \u201cvirtualServiceName\u201d to avoid confusing, since \u201cvirtualServiceName\u201d means \u201cname for a k8s virtualService resource\u201d under k8s\u2019s convention.</p> <pre><code>apiVersion: appmesh.k8s.aws/v1beta1\nkind: VirtualNode\nmetadata:\nnamespace: my-app-ns\nname: my-app-node\nspec:\n...other fields...\nbackends:\n- virtualService:\nvirtualServiceRef:\nawsName: \"my-ecs-service\"\n</code></pre> </li> </ol>"},{"location":"reference/api_design/#decouple-virtualrouter-from-virtualservice","title":"Decouple VirtualRouter from VirtualService","text":"<p>In AppMesh a VirtualService can use either VirtualRouter or VirtualNode as provider. VirtualRouter is only need when L7 routing functionality is needed.</p> <p>We\u2019ll create a new CRD named VirtualRouter, which represents AppMesh VirtualRouter object and embeds multiple AppMesh VirtualRoute objects.</p> <pre><code>apiVersion: appmesh.k8s.aws/v1beta2\nkind: VirtualRouter\nmetadata:\nnamespace: my-app-ns\nname: svc-a\nspec:\nawsName: svc-a_my-app-ns\nlisteners:\n- portMapping:\nport: 9080\nprotocol: http\nroutes:\n- name: route-to-auth\nhttp:\nmatch:\nprefix: /auth\naction:\nweightedTargets:\n- virtualNodeRef:\nnamespace: my-app-ns\nname: node-v1\nweight: 1\n</code></pre> <p>Note: The additional hierarchy of \"virtualRouter\" and \"virtualNode\" in addition to \"virtualRouterRef\" and \"virtualNodeRef\" is to align with AppMesh API(so that additional attributes specific to provider can be added easily).</p> <ul> <li>VirtualService can reference virtualRouter as provider:     <pre><code>apiVersion: appmesh.k8s.aws/v1beta2\nkind: VirtualService\nmetadata:\nnamespace: my-app-ns\nname: svc-a\nspec:\nhosts:\n- svc-b.my-app-ns.svc.cluster.local\nprovider:  virtualRouter:\nvirtualRouterRef:\nnamespace: my-app-ns\nname: svc-a-router\n</code></pre></li> <li>VirtualService can reference virtualNode as provider:     <pre><code>apiVersion: appmesh.k8s.aws/v1beta2\nkind: VirtualService\nmetadata:\nnamespace: my-app-ns\nname: svc-b\nspec:\nhosts:\n- svc-a.my-app-ns.svc.cluster.local\nprovider:\nvirtualNode:\nvirtualNodeRef:\nnamespace: my-app-ns\nname: node-v2\n</code></pre></li> </ul>"},{"location":"reference/api_design/#use-selector-on-mesh-to-denote-mesh-membership-for-resources-within-namespaces","title":"Use selector on Mesh to denote mesh membership for resources within namespaces","text":"<p>Meshes should be set up by cluster administrator, they can use a selector to designate the mesh membership for resources in different k8s namespaces.</p> <p>Note: The label selectors of two mesh must not overlap. Controller should error if detected conflicting meshes for given resource.</p> <p>Initially, we can assume all resources in a single namespace will always belong to same mesh, so we only need namespaceSelector on Mesh resource. namespaceSelector follows standard label selector semantics, if presents not empty, it selects all namespaces.</p> <p>This also enables use cases like share a AppMesh application configuration since the application specific configuration(virtualNode / virtualService) no longer rely on specific mesh presents.</p> <pre><code>apiVersion: appmesh.k8s.aws/v1beta2\nkind: Mesh\nmetadata:\nname: global\nspec:\nnamespaceSelector:\nmatchLabels:\nmesh: my-mesh\n---\napiVersion: v1\nkind: Namespace\nmetadata:\nname: my-app-ns\nlabels:\nmesh: my-mesh\n</code></pre> <p>[optional, not planned] If we need to support resources in a single namespace to belong to different meshes, we can extend above to have a resourceSelector to match labels on resources like VirtualService and VirtualNode in addition to the namespaceSelector.</p> <pre><code>apiVersion: appmesh.k8s.aws/v1beta2\nkind: Mesh\nmetadata:\nname: my-mesh\nspec:\nnamespaceSelector:\nmatchLabels:\nmesh: my-mesh\nresourceSelector:\nmatchLabels:\nmesh: my-mesh\n</code></pre> <p>Alternative designs considered: 1. Use meshName on resources to denote mesh membership. (this is existing design used in our controller)</p> <pre><code>Currently we are using a meshName on resources to denote mesh membership.\n\n```yaml\napiVersion: appmesh.k8s.aws/v1beta1\nkind: VirtualService\nmetadata:\nnamespace: my-app-ns\nname: my-app-svc\nspec:\nmeshName: my-mesh\n...other fields...\n```\n\nPros:\n* enforced that a resource can only belong to a single mesh. * simple implementation for lookup mesh based on resource. since the meshName is included on resources directly.\n\nCons:\n* poor security model. a less privileged user limited within namespace can create resources into mesh freely. * requires user to set meshName on every resource even within a namespace.\n</code></pre> <ol> <li> <p>Use annotation on namespaces to denote mesh membership.</p> <p>We can use annotations on namespaces to denote mesh membership.</p> <pre><code>apiVersion: v1\nkind: Namespace\nmetadata:\nname: my-app-ns\nannotations:\nappmesh.k8s.aws/mesh-name: my-mesh\n</code></pre> <p>Pros:  * enforced that a resource in a namespace can only belong to a single mesh * simple implementation for lookup mesh based on resource. since the meshName is included on resources\u2019s namespace directly.</p> <p>Cons: * not Kubernetes native. The Kubernetes native way is to use label selector to denote membership. * not possible for extensions like for a single namespace into multiple meshes in the future.</p> </li> <li> <p>Use an array of selectors instead of a single one on mesh resource.</p> <p>Selectors among selectors array are \u201cOR\u201d relationship. And within a selector it\u2019s AND relationship(e.g. resources must match both namespaceSelector &amp; resourceSelector to be member of the mesh)</p> <pre><code>apiVersion: appmesh.k8s.aws/v1beta2\nkind: Mesh\nmetadata:\nname: my-mesh\nspec:\nselectors:\n- namespaceSelector:\nmatchLabels:\nmesh: my-mesh\n- namespaceSelector:\nmatchLabels:\nmy-mesh: \"true\"\nresourceSelector:\nmatchLabels:\nmy-mesh: \"true\"\n</code></pre> <p>Pros: * let user freely define selectors for different use cases.</p> <p>Cons: * over complicated for simple use cases. users should be properly organize their labels to achieve similar effect even under the single selector proposal.</p> </li> </ol>"},{"location":"reference/api_design/#use-selector-on-virtualnode-to-denote-node-membership","title":"Use selector on VirtualNode to denote node membership","text":"<p>We use a podSelector to match pods that should be member of virtualNode. Note, we don\u2019t use a namespace selector here since we want to enforce pods are in same namespace of virtualNode resource.</p> <p>The label selectors of two virtualNode within namespace must not overlap. Controller should error if detected conflicting virtualNode for given pod.</p> <p>The injector will be changed to work using following logic: 1. for each pod created, it match against all virtualNode\u2019s selector within namespace. 2. If it finds a single match, injects according to virtualNode\u2019s mesh and name. 3. If it finds multiple match, it reports error. 4. The global \"APPMESH_NAME\" environment variable on injector deployment and annotation \"appmesh.k8s.aws/mesh\" and \"appmesh.k8s.aws/virtualNode\" annotation on pod will no longer be supported.</p> <pre><code>apiVersion: appmesh.k8s.aws/v1beta1\nkind: VirtualNode\nmetadata:\nnamespace: my-app-ns\nname: my-app-node\nspec:\n...other fields...\npodSelector:\nmatchLabels:\napp: my-app-node\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\nnamespace: my-app-ns\nname: my-app-node-deployment\nspec:\nselector:\nmatchLabels:\napp: my-app-node\nreplicas: 5\ntemplate:\nmetadata:\nlabels:\napp: my-app-node\nspec:\ncontainers:\n- name: app\nimage: awesomeimage:v1.0.0\nports:\n- containerPort: 80\n</code></pre> <p>Alternative designs considered:</p> <ol> <li> <p>The injector use an environment variable for default mesh name and allow override per pod with annotation <code>appmesh.k8s.aws/mesh</code>. Also,  the virtualNodeName is derived from pod\u2019s replicaSet\u2019s deployment name and allows override per pod with annotation <code>appmesh.k8s.aws/virtualNode</code> (this is existing design used in our controller)</p> <p>Pros: * easy to implement since all information is on pod itself.</p> <p>Cons: * The default behavior to resolve mesh relies on the fact that there is only one mesh in cluster, which conflicts with our multiple mesh per cluster support. * The default behavior to resolve virtualNode is not k8s native. it implies pods are managed by replicaSets then by deployments, which is tricky and not always true. * the annotations are intrusive to user\u2019s application.</p> </li> </ol>"},{"location":"reference/api_spec/","title":"APISpec","text":"<p>Packages:</p> <ul> <li> appmesh.k8s.aws/v1beta2 </li> </ul>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2","title":"appmesh.k8s.aws/v1beta2","text":"<p> <p>Package v1beta2 contains API Schema definitions for the appmesh v1beta2 API group</p> </p> <p>Resource Types:</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.AWSCloudMapInstanceAttribute","title":"AWSCloudMapInstanceAttribute","text":"<p> (Appears on: AWSCloudMapServiceDiscovery) </p> <p> <p>AWSCloudMapInstanceAttribute refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_AwsCloudMapInstanceAttribute.html</p> </p> Field Description <code>key</code>  string  <p>The name of an AWS Cloud Map service instance attribute key.</p> <code>value</code>  string  <p>The value of an AWS Cloud Map service instance attribute key.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.AWSCloudMapServiceDiscovery","title":"AWSCloudMapServiceDiscovery","text":"<p> (Appears on: ServiceDiscovery) </p> <p> <p>AWSCloudMapServiceDiscovery refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_AwsCloudMapServiceDiscovery.html</p> </p> Field Description <code>namespaceName</code>  string  <p>The name of the AWS Cloud Map namespace to use.</p> <code>serviceName</code>  string  <p>The name of the AWS Cloud Map service to use.</p> <code>attributes</code>  []AWSCloudMapInstanceAttribute  (Optional) <p>A string map that contains attributes with values that you can use to filter instances by any custom attribute that you specified when you registered the instance</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.AccessLog","title":"AccessLog","text":"<p> (Appears on: Logging) </p> <p> <p>AccessLog refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_AccessLog.html</p> </p> Field Description <code>file</code>  FileAccessLog  (Optional) <p>The file object to send virtual node access logs to.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.Backend","title":"Backend","text":"<p> (Appears on: VirtualNodeSpec) </p> <p> <p>Backend refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_Backend.html</p> </p> Field Description <code>virtualService</code>  VirtualServiceBackend  <p>Specifies a virtual service to use as a backend for a virtual node.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.BackendDefaults","title":"BackendDefaults","text":"<p> (Appears on: VirtualNodeSpec) </p> <p> <p>BackendDefaults refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_BackendDefaults.html</p> </p> Field Description <code>clientPolicy</code>  ClientPolicy  (Optional) <p>A reference to an object that represents a client policy.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.ClientPolicy","title":"ClientPolicy","text":"<p> (Appears on: BackendDefaults,  VirtualServiceBackend) </p> <p> <p>ClientPolicy refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_ClientPolicy.html</p> </p> Field Description <code>tls</code>  ClientPolicyTLS  (Optional) <p>A reference to an object that represents a Transport Layer Security (TLS) client policy.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.ClientPolicyTLS","title":"ClientPolicyTLS","text":"<p> (Appears on: ClientPolicy) </p> <p> <p>ClientPolicyTLS refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_ClientPolicyTls.html</p> </p> Field Description <code>enforce</code>  bool  (Optional) <p>Whether the policy is enforced. If unspecified, default settings from AWS API will be applied. Refer to AWS Docs for default settings.</p> <code>ports</code>  []PortNumber  (Optional) <p>The range of ports that the policy is enforced for.</p> <code>validation</code>  TLSValidationContext  <p>A reference to an object that represents a TLS validation context.</p> <code>certificate</code>  ClientTLSCertificate  (Optional) <p>A reference to an object that represents TLS certificate.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.ClientTLSCertificate","title":"ClientTLSCertificate","text":"<p> (Appears on: ClientPolicyTLS) </p> <p> </p> Field Description <code>file</code>  ListenerTLSFileCertificate  (Optional) <p>An object that represents a TLS cert via a local file</p> <code>sds</code>  ListenerTLSSDSCertificate  (Optional) <p>An object that represents a TLS cert via SDS entry</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.DNSServiceDiscovery","title":"DNSServiceDiscovery","text":"<p> (Appears on: ServiceDiscovery) </p> <p> <p>DNSServiceDiscovery refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_DnsServiceDiscovery.html</p> </p> Field Description <code>hostname</code>  string  <p>Specifies the DNS service discovery hostname for the virtual node.</p> <code>responseType</code>  string  (Optional) <p>Choose between ENDPOINTS (strict DNS) and LOADBALANCER (logical DNS) mode in Envoy sidecar</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.Duration","title":"Duration","text":"<p> (Appears on: GRPCRetryPolicy,  GRPCTimeout,  HTTPRetryPolicy,  HTTPTimeout,  OutlierDetection,  TCPTimeout) </p> <p> </p> Field Description <code>unit</code>  DurationUnit  <p>A unit of time.</p> <code>value</code>  int64  <p>A number of time units.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.DurationUnit","title":"DurationUnit (<code>string</code> alias)","text":"<p> (Appears on: Duration) </p> <p> </p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.EgressFilter","title":"EgressFilter","text":"<p> (Appears on: MeshSpec) </p> <p> <p>EgressFilter refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_EgressFilter.html</p> </p> Field Description <code>type</code>  EgressFilterType  <p>The egress filter type.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.EgressFilterType","title":"EgressFilterType (<code>string</code> alias)","text":"<p> (Appears on: EgressFilter) </p> <p> </p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.FileAccessLog","title":"FileAccessLog","text":"<p> (Appears on: AccessLog) </p> <p> <p>FileAccessLog refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_FileAccessLog.html</p> </p> Field Description <code>path</code>  string  <p>The file path to write access logs to.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GRPCConnectionPool","title":"GRPCConnectionPool","text":"<p> (Appears on: VirtualGatewayConnectionPool,  VirtualNodeConnectionPool) </p> <p> </p> Field Description <code>maxRequests</code>  int64  <p>Represents the maximum number of inflight requests that an envoy can concurrently support across all the hosts in the upstream cluster</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GRPCGatewayRoute","title":"GRPCGatewayRoute","text":"<p> (Appears on: GatewayRouteSpec) </p> <p> <p>GRPCGatewayRoute refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/gateway-routes.html</p> </p> Field Description <code>match</code>  GRPCGatewayRouteMatch  <p>An object that represents the criteria for determining a request match.</p> <code>action</code>  GRPCGatewayRouteAction  <p>An object that represents the action to take if a match is determined.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GRPCGatewayRouteAction","title":"GRPCGatewayRouteAction","text":"<p> (Appears on: GRPCGatewayRoute) </p> <p> <p>GRPCGatewayRouteAction refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_GrpcGatewayRouteAction.html</p> </p> Field Description <code>target</code>  GatewayRouteTarget  <p>An object that represents the target that traffic is routed to when a request matches the route.</p> <code>rewrite</code>  GrpcGatewayRouteRewrite  (Optional)"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GRPCGatewayRouteMatch","title":"GRPCGatewayRouteMatch","text":"<p> (Appears on: GRPCGatewayRoute) </p> <p> <p>GRPCGatewayRouteMatch refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_GrpcGatewayRouteMatch.html</p> </p> Field Description <code>serviceName</code>  string  (Optional) <p>Either ServiceName or Hostname must be specified. Both are allowed as well The fully qualified domain name for the service to match from the request.</p> <code>hostname</code>  GatewayRouteHostnameMatch  (Optional) <p>The client specified Hostname to match on.</p> <code>metadata</code>  []GRPCGatewayRouteMetadata  (Optional) <p>An object that represents the data to match from the request.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GRPCGatewayRouteMetadata","title":"GRPCGatewayRouteMetadata","text":"<p> (Appears on: GRPCGatewayRouteMatch) </p> <p> <p>GRPCGatewayRouteMetadata refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_GrpcGatewayRouteMetadata.html</p> </p> Field Description <code>name</code>  string  <p>The name of the route.</p> <code>match</code>  GRPCRouteMetadataMatchMethod  (Optional) <p>An object that represents the data to match from the request.</p> <code>invert</code>  bool  (Optional) <p>Specify True to match anything except the match criteria. The default value is False.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GRPCRetryPolicy","title":"GRPCRetryPolicy","text":"<p> (Appears on: GRPCRoute) </p> <p> <p>GRPCRetryPolicy refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_GrpcRetryPolicy.html</p> </p> Field Description <code>grpcRetryEvents</code>  []GRPCRetryPolicyEvent  (Optional) <code>httpRetryEvents</code>  []HTTPRetryPolicyEvent  (Optional) <code>tcpRetryEvents</code>  []TCPRetryPolicyEvent  (Optional) <code>maxRetries</code>  int64  <p>The maximum number of retry attempts.</p> <code>perRetryTimeout</code>  Duration  <p>An object that represents a duration of time.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GRPCRetryPolicyEvent","title":"GRPCRetryPolicyEvent (<code>string</code> alias)","text":"<p> (Appears on: GRPCRetryPolicy) </p> <p> </p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GRPCRoute","title":"GRPCRoute","text":"<p> (Appears on: Route) </p> <p> <p>GRPCRoute refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_GrpcRoute.html</p> </p> Field Description <code>match</code>  GRPCRouteMatch  <p>An object that represents the criteria for determining a request match.</p> <code>action</code>  GRPCRouteAction  <p>An object that represents the action to take if a match is determined.</p> <code>retryPolicy</code>  GRPCRetryPolicy  (Optional) <p>An object that represents a retry policy.</p> <code>timeout</code>  GRPCTimeout  (Optional) <p>An object that represents a grpc timeout.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GRPCRouteAction","title":"GRPCRouteAction","text":"<p> (Appears on: GRPCRoute) </p> <p> <p>GRPCRouteAction refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_GrpcRouteAction.html</p> </p> Field Description <code>weightedTargets</code>  []WeightedTarget  <p>An object that represents the targets that traffic is routed to when a request matches the route.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GRPCRouteMatch","title":"GRPCRouteMatch","text":"<p> (Appears on: GRPCRoute) </p> <p> <p>GRPCRouteMatch refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_GrpcRouteMatch.html</p> </p> Field Description <code>methodName</code>  string  (Optional) <p>The method name to match from the request. If you specify a name, you must also specify a serviceName.</p> <code>serviceName</code>  string  (Optional) <p>The fully qualified domain name for the service to match from the request.</p> <code>metadata</code>  []GRPCRouteMetadata  (Optional) <p>An object that represents the data to match from the request.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GRPCRouteMetadata","title":"GRPCRouteMetadata","text":"<p> (Appears on: GRPCRouteMatch) </p> <p> <p>GRPCRouteMetadata refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_GrpcRouteMetadata.html</p> </p> Field Description <code>name</code>  string  <p>The name of the route.</p> <code>match</code>  GRPCRouteMetadataMatchMethod  (Optional) <p>An object that represents the data to match from the request.</p> <code>invert</code>  bool  (Optional) <p>Specify True to match anything except the match criteria. The default value is False.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GRPCRouteMetadataMatchMethod","title":"GRPCRouteMetadataMatchMethod","text":"<p> (Appears on: GRPCGatewayRouteMetadata,  GRPCRouteMetadata) </p> <p> <p>GRPCRouteMetadataMatchMethod refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_GrpcRouteMetadataMatchMethod.html</p> </p> Field Description <code>exact</code>  string  (Optional) <p>The value sent by the client must match the specified value exactly.</p> <code>prefix</code>  string  (Optional) <p>The value sent by the client must begin with the specified characters.</p> <code>range</code>  MatchRange  (Optional) <p>An object that represents the range of values to match on</p> <code>regex</code>  string  (Optional) <p>The value sent by the client must include the specified characters.</p> <code>suffix</code>  string  (Optional) <p>The value sent by the client must end with the specified characters.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GRPCTimeout","title":"GRPCTimeout","text":"<p> (Appears on: GRPCRoute,  ListenerTimeout) </p> <p> </p> Field Description <code>perRequest</code>  Duration  (Optional) <p>An object that represents per request timeout duration.</p> <code>idle</code>  Duration  (Optional) <p>An object that represents idle timeout duration.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GatewayRoute","title":"GatewayRoute","text":"<p> <p>GatewayRoute is the Schema for the gatewayroutes API</p> </p> Field Description <code>metadata</code>  Kubernetes meta/v1.ObjectMeta   Refer to the Kubernetes API documentation for the fields of the <code>metadata</code> field.  <code>spec</code>  GatewayRouteSpec  <code>awsName</code>  string  (Optional) <p>AWSName is the AppMesh GatewayRoute object\u2019s name. If unspecified or empty, it defaults to be \u201c${name}_${namespace}\u201d of k8s GatewayRoute</p> <code>priority</code>  int64  (Optional) <p>Priority for the gatewayroute. Default Priority is 1000 which is lowest priority</p> <code>grpcRoute</code>  GRPCGatewayRoute  (Optional) <p>An object that represents the specification of a gRPC gatewayRoute.</p> <code>httpRoute</code>  HTTPGatewayRoute  (Optional) <p>An object that represents the specification of an HTTP gatewayRoute.</p> <code>http2Route</code>  HTTPGatewayRoute  (Optional) <p>An object that represents the specification of an HTTP/2 gatewayRoute.</p> <code>virtualGatewayRef</code>  VirtualGatewayReference  (Optional) <p>A reference to k8s VirtualGateway CR that this GatewayRoute belongs to. The admission controller populates it using VirtualGateway\u2019s selector, and prevents users from setting this field.</p> <p>Populated by the system. Read-only.</p> <code>meshRef</code>  MeshReference  (Optional) <p>A reference to k8s Mesh CR that this GatewayRoute belongs to. The admission controller populates it using Meshes\u2019s selector, and prevents users from setting this field.</p> <p>Populated by the system. Read-only.</p> <code>status</code>  GatewayRouteStatus"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GatewayRouteCondition","title":"GatewayRouteCondition","text":"<p> (Appears on: GatewayRouteStatus) </p> <p> </p> Field Description <code>type</code>  GatewayRouteConditionType  <p>Type of GatewayRoute condition.</p> <code>status</code>  Kubernetes core/v1.ConditionStatus  <p>Status of the condition, one of True, False, Unknown.</p> <code>lastTransitionTime</code>  Kubernetes meta/v1.Time  (Optional) <p>Last time the condition transitioned from one status to another.</p> <code>reason</code>  string  (Optional) <p>The reason for the condition\u2019s last transition.</p> <code>message</code>  string  (Optional) <p>A human readable message indicating details about the transition.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GatewayRouteConditionType","title":"GatewayRouteConditionType (<code>string</code> alias)","text":"<p> (Appears on: GatewayRouteCondition) </p> <p> </p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GatewayRouteHostnameMatch","title":"GatewayRouteHostnameMatch","text":"<p> (Appears on: GRPCGatewayRouteMatch,  HTTPGatewayRouteMatch) </p> <p> <p>Hostname based match, either Exact or Suffix must be specified. Both are not allowed GatewayRouteHostnameMatch refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_GatewayRouteHostnameMatch.html</p> </p> Field Description <code>exact</code>  string  (Optional) <p>The value sent by the client must match the specified value exactly.</p> <code>suffix</code>  string  (Optional) <p>The value sent by the client must end with the specified characters.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GatewayRouteHostnameRewrite","title":"GatewayRouteHostnameRewrite","text":"<p> (Appears on: GrpcGatewayRouteRewrite,  HTTPGatewayRouteRewrite) </p> <p> <p>GatewayRouteHostnameRewrite refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_GatewayRouteHostnameRewrite.html ENABLE or DISABLE default behavior for Hostname rewrite</p> </p> Field Description <code>defaultTargetHostname</code>  string  (Optional)"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GatewayRoutePathRewrite","title":"GatewayRoutePathRewrite","text":"<p> (Appears on: HTTPGatewayRouteRewrite) </p> <p> <p>GatewayRoutePathRewrite refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_HttpGatewayRoutePathRewrite.html</p> </p> Field Description <code>exact</code>  string  (Optional)"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GatewayRoutePrefixRewrite","title":"GatewayRoutePrefixRewrite","text":"<p> (Appears on: HTTPGatewayRouteRewrite) </p> <p> <p>GatewayRoutePrefixRewrite refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_HttpGatewayRoutePrefixRewrite.html</p> </p> Field Description <code>defaultPrefix</code>  string  (Optional) <code>value</code>  string  (Optional) <p>When DefaultPrefix is specified, Value cannot be set</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GatewayRouteSpec","title":"GatewayRouteSpec","text":"<p> (Appears on: GatewayRoute) </p> <p> <p>GatewayRouteSpec defines the desired state of GatewayRoute refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_GatewayRouteSpec.html</p> </p> Field Description <code>awsName</code>  string  (Optional) <p>AWSName is the AppMesh GatewayRoute object\u2019s name. If unspecified or empty, it defaults to be \u201c${name}_${namespace}\u201d of k8s GatewayRoute</p> <code>priority</code>  int64  (Optional) <p>Priority for the gatewayroute. Default Priority is 1000 which is lowest priority</p> <code>grpcRoute</code>  GRPCGatewayRoute  (Optional) <p>An object that represents the specification of a gRPC gatewayRoute.</p> <code>httpRoute</code>  HTTPGatewayRoute  (Optional) <p>An object that represents the specification of an HTTP gatewayRoute.</p> <code>http2Route</code>  HTTPGatewayRoute  (Optional) <p>An object that represents the specification of an HTTP/2 gatewayRoute.</p> <code>virtualGatewayRef</code>  VirtualGatewayReference  (Optional) <p>A reference to k8s VirtualGateway CR that this GatewayRoute belongs to. The admission controller populates it using VirtualGateway\u2019s selector, and prevents users from setting this field.</p> <p>Populated by the system. Read-only.</p> <code>meshRef</code>  MeshReference  (Optional) <p>A reference to k8s Mesh CR that this GatewayRoute belongs to. The admission controller populates it using Meshes\u2019s selector, and prevents users from setting this field.</p> <p>Populated by the system. Read-only.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GatewayRouteStatus","title":"GatewayRouteStatus","text":"<p> (Appears on: GatewayRoute) </p> <p> <p>GatewayRouteStatus defines the observed state of GatewayRoute</p> </p> Field Description <code>gatewayRouteARN</code>  string  (Optional) <p>GatewayRouteARN is the AppMesh GatewayRoute object\u2019s Amazon Resource Name</p> <code>conditions</code>  []GatewayRouteCondition  (Optional) <p>The current GatewayRoute status.</p> <code>observedGeneration</code>  int64  (Optional) <p>The generation observed by the GatewayRoute controller.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GatewayRouteTarget","title":"GatewayRouteTarget","text":"<p> (Appears on: GRPCGatewayRouteAction,  HTTPGatewayRouteAction) </p> <p> <p>GatewayRouteTarget refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_GatewayRouteTarget.html</p> </p> Field Description <code>virtualService</code>  GatewayRouteVirtualService  <p>The virtual service to associate with the gateway route target.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GatewayRouteVirtualService","title":"GatewayRouteVirtualService","text":"<p> (Appears on: GatewayRouteTarget) </p> <p> <p>GatewayRouteVirtualService refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_GatewayRouteVirtualService.html</p> </p> Field Description <code>virtualServiceRef</code>  VirtualServiceReference  (Optional) <p>Reference to Kubernetes VirtualService CR in cluster to associate with the gateway route virtual service target. Exactly one of \u2018virtualServiceRef\u2019 or \u2018virtualServiceARN\u2019 must be specified.</p> <code>virtualServiceARN</code>  string  (Optional) <p>Amazon Resource Name to AppMesh VirtualService object to associate with the gateway route virtual service target. Exactly one of \u2018virtualServiceRef\u2019 or \u2018virtualServiceARN\u2019 must be specified.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.GrpcGatewayRouteRewrite","title":"GrpcGatewayRouteRewrite","text":"<p> (Appears on: GRPCGatewayRouteAction) </p> <p> <p>GrpcGatewayRouteRewrite refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_GrpcGatewayRouteRewrite.html</p> </p> Field Description <code>hostname</code>  GatewayRouteHostnameRewrite"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.HTTP2ConnectionPool","title":"HTTP2ConnectionPool","text":"<p> (Appears on: VirtualGatewayConnectionPool,  VirtualNodeConnectionPool) </p> <p> </p> Field Description <code>maxRequests</code>  int64  <p>Represents the maximum number of inflight requests that an envoy can concurrently support across all the hosts in the upstream cluster</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.HTTPConnectionPool","title":"HTTPConnectionPool","text":"<p> (Appears on: VirtualGatewayConnectionPool,  VirtualNodeConnectionPool) </p> <p> </p> Field Description <code>maxConnections</code>  int64  <p>Represents the maximum number of outbound TCP connections the envoy can establish concurrently with all the hosts in the upstream cluster.</p> <code>maxPendingRequests</code>  int64  (Optional) <p>Represents the number of overflowing requests after max_connections that an envoy will queue to an upstream cluster.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.HTTPGatewayRoute","title":"HTTPGatewayRoute","text":"<p> (Appears on: GatewayRouteSpec) </p> <p> <p>HTTPGatewayRoute refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/gateway-routes.html</p> </p> Field Description <code>match</code>  HTTPGatewayRouteMatch  <p>An object that represents the criteria for determining a request match.</p> <code>action</code>  HTTPGatewayRouteAction  <p>An object that represents the action to take if a match is determined.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.HTTPGatewayRouteAction","title":"HTTPGatewayRouteAction","text":"<p> (Appears on: HTTPGatewayRoute) </p> <p> <p>HTTPGatewayRouteAction refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_HttpGatewayRouteAction.html</p> </p> Field Description <code>target</code>  GatewayRouteTarget  <p>An object that represents the target that traffic is routed to when a request matches the route.</p> <code>rewrite</code>  HTTPGatewayRouteRewrite  (Optional)"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.HTTPGatewayRouteHeader","title":"HTTPGatewayRouteHeader","text":"<p> (Appears on: HTTPGatewayRouteMatch) </p> <p> <p>HTTPGatewayRouteHeader refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_HttpGatewayRouteHeader.html</p> </p> Field Description <code>name</code>  string  <p>A name for the HTTP header in the client request that will be matched on.</p> <code>match</code>  HeaderMatchMethod  (Optional) <p>The HeaderMatchMethod object.</p> <code>invert</code>  bool  (Optional) <p>Specify True to match anything except the match criteria. The default value is False.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.HTTPGatewayRouteMatch","title":"HTTPGatewayRouteMatch","text":"<p> (Appears on: HTTPGatewayRoute) </p> <p> <p>HTTPGatewayRouteMatch refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_HttpGatewayRouteMatch.html</p> </p> Field Description <code>prefix</code>  string  (Optional) <p>Either Prefix or Hostname must be specified. Both are allowed as well. Specifies the prefix to match requests with</p> <code>path</code>  HTTPPathMatch  (Optional) <p>Specified path of the request to be matched on</p> <code>queryParameters</code>  []HTTPQueryParameters  (Optional) <p>Client specified query parameters to match on</p> <code>method</code>  string  (Optional) <p>The client request method to match on.</p> <code>hostname</code>  GatewayRouteHostnameMatch  (Optional) <p>The client specified Hostname to match on.</p> <code>headers</code>  []HTTPGatewayRouteHeader  (Optional) <p>An object that represents the client request headers to match on.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.HTTPGatewayRouteRewrite","title":"HTTPGatewayRouteRewrite","text":"<p> (Appears on: HTTPGatewayRouteAction) </p> <p> <p>HTTPGatewayRouteRewrite refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_HttpGatewayRouteRewrite.html</p> </p> Field Description <code>prefix</code>  GatewayRoutePrefixRewrite  (Optional) <code>path</code>  GatewayRoutePathRewrite  (Optional) <code>hostname</code>  GatewayRouteHostnameRewrite  (Optional)"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.HTTPPathMatch","title":"HTTPPathMatch","text":"<p> (Appears on: HTTPGatewayRouteMatch,  HTTPRouteMatch) </p> <p> <p>HTTPPathMatch refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_HttpPathMatch.html</p> </p> Field Description <code>exact</code>  string  (Optional) <p>The value sent by the client must match the specified value exactly.</p> <code>regex</code>  string  (Optional) <p>The value sent by the client must end with the specified characters.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.HTTPQueryParameters","title":"HTTPQueryParameters","text":"<p> (Appears on: HTTPGatewayRouteMatch,  HTTPRouteMatch) </p> <p> <p>HTTPQueryParameters refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_HttpQueryParameter.html</p> </p> Field Description <code>name</code>  string  <code>match</code>  QueryMatchMethod  (Optional) <p>The QueryMatchMethod object.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.HTTPRetryPolicy","title":"HTTPRetryPolicy","text":"<p> (Appears on: HTTPRoute) </p> <p> <p>HTTPRetryPolicy refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_HttpRetryPolicy.html</p> </p> Field Description <code>httpRetryEvents</code>  []HTTPRetryPolicyEvent  (Optional) <code>tcpRetryEvents</code>  []TCPRetryPolicyEvent  (Optional) <code>maxRetries</code>  int64  <p>The maximum number of retry attempts.</p> <code>perRetryTimeout</code>  Duration  <p>An object that represents a duration of time</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.HTTPRetryPolicyEvent","title":"HTTPRetryPolicyEvent (<code>string</code> alias)","text":"<p> (Appears on: GRPCRetryPolicy,  HTTPRetryPolicy) </p> <p> </p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.HTTPRoute","title":"HTTPRoute","text":"<p> (Appears on: Route) </p> <p> <p>HTTPRoute refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_HttpRoute.html</p> </p> Field Description <code>match</code>  HTTPRouteMatch  <p>An object that represents the criteria for determining a request match.</p> <code>action</code>  HTTPRouteAction  <p>An object that represents the action to take if a match is determined.</p> <code>retryPolicy</code>  HTTPRetryPolicy  (Optional) <p>An object that represents a retry policy.</p> <code>timeout</code>  HTTPTimeout  (Optional) <p>An object that represents a http timeout.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.HTTPRouteAction","title":"HTTPRouteAction","text":"<p> (Appears on: HTTPRoute) </p> <p> <p>HTTPRouteAction refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_HttpRouteAction.html</p> </p> Field Description <code>weightedTargets</code>  []WeightedTarget  <p>An object that represents the targets that traffic is routed to when a request matches the route.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.HTTPRouteHeader","title":"HTTPRouteHeader","text":"<p> (Appears on: HTTPRouteMatch) </p> <p> <p>HTTPRouteHeader refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_HttpRouteHeader.html</p> </p> Field Description <code>name</code>  string  <p>A name for the HTTP header in the client request that will be matched on.</p> <code>match</code>  HeaderMatchMethod  (Optional) <p>The HeaderMatchMethod object.</p> <code>invert</code>  bool  (Optional) <p>Specify True to match anything except the match criteria. The default value is False.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.HTTPRouteMatch","title":"HTTPRouteMatch","text":"<p> (Appears on: HTTPRoute) </p> <p> <p>HTTPRouteMatch refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_HttpRouteMatch.html</p> </p> Field Description <code>headers</code>  []HTTPRouteHeader  (Optional) <p>An object that represents the client request headers to match on.</p> <code>method</code>  string  (Optional) <p>The client request method to match on.</p> <code>prefix</code>  string  (Optional) <p>Specifies the prefix to match requests with</p> <code>scheme</code>  string  (Optional) <p>The client request scheme to match on</p> <code>path</code>  HTTPPathMatch  (Optional) <p>The client specified Path to match on.</p> <code>queryParameters</code>  []HTTPQueryParameters  (Optional) <p>The client specified queryParameters to match on</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.HTTPTimeout","title":"HTTPTimeout","text":"<p> (Appears on: HTTPRoute,  ListenerTimeout) </p> <p> </p> Field Description <code>perRequest</code>  Duration  (Optional) <p>An object that represents per request timeout duration.</p> <code>idle</code>  Duration  (Optional) <p>An object that represents idle timeout duration.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.HeaderMatchMethod","title":"HeaderMatchMethod","text":"<p> (Appears on: HTTPGatewayRouteHeader,  HTTPRouteHeader) </p> <p> <p>HeaderMatchMethod refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_HeaderMatchMethod.html</p> </p> Field Description <code>exact</code>  string  (Optional) <p>The value sent by the client must match the specified value exactly.</p> <code>prefix</code>  string  (Optional) <p>The value sent by the client must begin with the specified characters.</p> <code>range</code>  MatchRange  (Optional) <p>An object that represents the range of values to match on.</p> <code>regex</code>  string  (Optional) <p>The value sent by the client must include the specified characters.</p> <code>suffix</code>  string  (Optional) <p>The value sent by the client must end with the specified characters.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.HealthCheckPolicy","title":"HealthCheckPolicy","text":"<p> (Appears on: Listener) </p> <p> <p>HealthCheckPolicy refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_HealthCheckPolicy.html</p> </p> Field Description <code>healthyThreshold</code>  int64  <p>The number of consecutive successful health checks that must occur before declaring listener healthy.</p> <code>intervalMillis</code>  int64  <p>The time period in milliseconds between each health check execution.</p> <code>path</code>  string  (Optional) <p>The destination path for the health check request. This value is only used if the specified protocol is http or http2. For any other protocol, this value is ignored.</p> <code>port</code>  PortNumber  (Optional) <p>The destination port for the health check request.</p> <code>protocol</code>  PortProtocol  <p>The protocol for the health check request</p> <code>timeoutMillis</code>  int64  <p>The amount of time to wait when receiving a response from the health check, in milliseconds.</p> <code>unhealthyThreshold</code>  int64  <p>The number of consecutive failed health checks that must occur before declaring a virtual node unhealthy.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.Listener","title":"Listener","text":"<p> (Appears on: VirtualNodeSpec) </p> <p> <p>Listener refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_Listener.html</p> </p> Field Description <code>portMapping</code>  PortMapping  <p>The port mapping information for the listener.</p> <code>healthCheck</code>  HealthCheckPolicy  (Optional) <p>The health check information for the listener.</p> <code>outlierDetection</code>  OutlierDetection  (Optional) <p>The outlier detection for the listener</p> <code>connectionPool</code>  VirtualNodeConnectionPool  (Optional) <p>The connection pool settings for the listener</p> <code>tls</code>  ListenerTLS  (Optional) <p>A reference to an object that represents the Transport Layer Security (TLS) properties for a listener.</p> <code>timeout</code>  ListenerTimeout  (Optional) <p>A reference to an object that represents</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.ListenerTLS","title":"ListenerTLS","text":"<p> (Appears on: Listener) </p> <p> <p>ListenerTLS refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_ListenerTls.html</p> </p> Field Description <code>certificate</code>  ListenerTLSCertificate  <p>A reference to an object that represents a listener\u2019s TLS certificate.</p> <code>mode</code>  ListenerTLSMode  <p>ListenerTLS mode</p> <code>validation</code>  ListenerTLSValidationContext  (Optional) <p>A reference to an object that represents an SDS Trust Domain</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.ListenerTLSACMCertificate","title":"ListenerTLSACMCertificate","text":"<p> (Appears on: ListenerTLSCertificate) </p> <p> <p>ListenerTLSACMCertificate refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_ListenerTlsAcmCertificate.html</p> </p> Field Description <code>certificateARN</code>  string  <p>The Amazon Resource Name (ARN) for the certificate.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.ListenerTLSCertificate","title":"ListenerTLSCertificate","text":"<p> (Appears on: ListenerTLS) </p> <p> <p>ListenerTLSCertificate refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_ListenerTlsCertificate.html</p> </p> Field Description <code>acm</code>  ListenerTLSACMCertificate  (Optional) <p>A reference to an object that represents an AWS Certificate Manager (ACM) certificate.</p> <code>file</code>  ListenerTLSFileCertificate  (Optional) <p>A reference to an object that represents a local file certificate.</p> <code>sds</code>  ListenerTLSSDSCertificate  (Optional) <p>A reference to an object that represents an SDS certificate.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.ListenerTLSFileCertificate","title":"ListenerTLSFileCertificate","text":"<p> (Appears on: ClientTLSCertificate,  ListenerTLSCertificate) </p> <p> <p>ListenerTLSFileCertificate refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_ListenerTlsFileCertificate.html</p> </p> Field Description <code>certificateChain</code>  string  <p>The certificate chain for the certificate.</p> <code>privateKey</code>  string  <p>The private key for a certificate stored on the file system of the virtual node that the proxy is running on.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.ListenerTLSMode","title":"ListenerTLSMode (<code>string</code> alias)","text":"<p> (Appears on: ListenerTLS) </p> <p> </p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.ListenerTLSSDSCertificate","title":"ListenerTLSSDSCertificate","text":"<p> (Appears on: ClientTLSCertificate,  ListenerTLSCertificate) </p> <p> <p>ListenerTLSSDSCertificate refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_ListenerTlsFileCertificate.html</p> </p> Field Description <code>secretName</code>  string  <p>The certificate trust chain for a certificate issued via SDS cluster</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.ListenerTLSValidationContext","title":"ListenerTLSValidationContext","text":"<p> (Appears on: ListenerTLS) </p> <p> </p> Field Description <code>trust</code>  ListenerTLSValidationContextTrust  <code>subjectAlternativeNames</code>  SubjectAlternativeNames  (Optional) <p>Possible alternative names to consider</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.ListenerTLSValidationContextTrust","title":"ListenerTLSValidationContextTrust","text":"<p> (Appears on: ListenerTLSValidationContext) </p> <p> </p> Field Description <code>file</code>  TLSValidationContextFileTrust  (Optional) <p>An object that represents a TLS validation context trust for a local file.</p> <code>sds</code>  TLSValidationContextSDSTrust  (Optional) <p>An object that represents a TLS validation context trust for an SDS server</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.ListenerTimeout","title":"ListenerTimeout","text":"<p> (Appears on: Listener) </p> <p> <p>ListenerTimeout refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_ListenerTimeout.html</p> </p> Field Description <code>tcp</code>  TCPTimeout  (Optional) <p>Specifies tcp timeout information for the virtual node.</p> <code>http</code>  HTTPTimeout  (Optional) <p>Specifies http timeout information for the virtual node.</p> <code>http2</code>  HTTPTimeout  (Optional) <p>Specifies http2 information for the virtual node.</p> <code>grpc</code>  GRPCTimeout  (Optional) <p>Specifies grpc timeout information for the virtual node.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.Logging","title":"Logging","text":"<p> (Appears on: VirtualNodeSpec) </p> <p> <p>Logging refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_Logging.html</p> </p> Field Description <code>accessLog</code>  AccessLog  (Optional) <p>The access log configuration for a virtual node.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.MatchRange","title":"MatchRange","text":"<p> (Appears on: GRPCRouteMetadataMatchMethod,  HeaderMatchMethod) </p> <p> </p> Field Description <code>start</code>  int64  <p>The start of the range.</p> <code>end</code>  int64  <p>The end of the range.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.Mesh","title":"Mesh","text":"<p> <p>Mesh is the Schema for the meshes API</p> </p> Field Description <code>metadata</code>  Kubernetes meta/v1.ObjectMeta   Refer to the Kubernetes API documentation for the fields of the <code>metadata</code> field.  <code>spec</code>  MeshSpec  <code>awsName</code>  string  (Optional) <p>AWSName is the AppMesh Mesh object\u2019s name. If unspecified or empty, it defaults to be \u201c${name}\u201d of k8s Mesh</p> <code>namespaceSelector</code>  Kubernetes meta/v1.LabelSelector  (Optional) <p>NamespaceSelector selects Namespaces using labels to designate mesh membership. This field follows standard label selector semantics: if present but empty, it selects all namespaces. if absent, it selects no namespace.</p> <code>egressFilter</code>  EgressFilter  (Optional) <p>The egress filter rules for the service mesh. If unspecified, default settings from AWS API will be applied. Refer to AWS Docs for default settings.</p> <code>meshOwner</code>  string  (Optional) <p>The AWS IAM account ID of the service mesh owner. Required if the account ID is not your own.</p> <code>status</code>  MeshStatus"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.MeshCondition","title":"MeshCondition","text":"<p> (Appears on: MeshStatus) </p> <p> </p> Field Description <code>type</code>  MeshConditionType  <p>Type of mesh condition.</p> <code>status</code>  Kubernetes core/v1.ConditionStatus  <p>Status of the condition, one of True, False, Unknown.</p> <code>lastTransitionTime</code>  Kubernetes meta/v1.Time  (Optional) <p>Last time the condition transitioned from one status to another.</p> <code>reason</code>  string  (Optional) <p>The reason for the condition\u2019s last transition.</p> <code>message</code>  string  (Optional) <p>A human readable message indicating details about the transition.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.MeshConditionType","title":"MeshConditionType (<code>string</code> alias)","text":"<p> (Appears on: MeshCondition) </p> <p> </p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.MeshReference","title":"MeshReference","text":"<p> (Appears on: GatewayRouteSpec,  VirtualGatewaySpec,  VirtualNodeSpec,  VirtualRouterSpec,  VirtualServiceSpec) </p> <p> <p>MeshReference holds a reference to Mesh.appmesh.k8s.aws</p> </p> Field Description <code>name</code>  string  <p>Name is the name of Mesh CR</p> <code>uid</code>  k8s.io/apimachinery/pkg/types.UID  <p>UID is the UID of Mesh CR</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.MeshSpec","title":"MeshSpec","text":"<p> (Appears on: Mesh) </p> <p> <p>MeshSpec defines the desired state of Mesh refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_MeshSpec.html</p> </p> Field Description <code>awsName</code>  string  (Optional) <p>AWSName is the AppMesh Mesh object\u2019s name. If unspecified or empty, it defaults to be \u201c${name}\u201d of k8s Mesh</p> <code>namespaceSelector</code>  Kubernetes meta/v1.LabelSelector  (Optional) <p>NamespaceSelector selects Namespaces using labels to designate mesh membership. This field follows standard label selector semantics: if present but empty, it selects all namespaces. if absent, it selects no namespace.</p> <code>egressFilter</code>  EgressFilter  (Optional) <p>The egress filter rules for the service mesh. If unspecified, default settings from AWS API will be applied. Refer to AWS Docs for default settings.</p> <code>meshOwner</code>  string  (Optional) <p>The AWS IAM account ID of the service mesh owner. Required if the account ID is not your own.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.MeshStatus","title":"MeshStatus","text":"<p> (Appears on: Mesh) </p> <p> <p>MeshStatus defines the observed state of Mesh</p> </p> Field Description <code>meshARN</code>  string  (Optional) <p>MeshARN is the AppMesh Mesh object\u2019s Amazon Resource Name</p> <code>conditions</code>  []MeshCondition  (Optional) <p>The current Mesh status.</p> <code>observedGeneration</code>  int64  (Optional) <p>The generation observed by the Mesh controller.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.OutlierDetection","title":"OutlierDetection","text":"<p> (Appears on: Listener) </p> <p> <p>OutlierDetection defines the health check policy that temporarily ejects an endpoint/host of a VirtualNode from the load balancing set when it meets failure threshold</p> </p> Field Description <code>maxServerErrors</code>  int64  <p>The threshold for the number of server errors returned by a given host during an outlier detection interval. If the server error count meets/exceeds this threshold the host is ejected. A server error is defined as any HTTP 5xx response (or the equivalent for gRPC and TCP connections)</p> <code>interval</code>  Duration  <p>The time interval between ejection analysis sweeps. This can result in both new ejections as well as hosts being returned to service</p> <code>baseEjectionDuration</code>  Duration  <p>The base time that a host is ejected for. The real time is equal to the base time multiplied by the number of times the host has been ejected</p> <code>maxEjectionPercent</code>  int64  <p>The threshold for the max percentage of outlier hosts that can be ejected from the load balancing set. maxEjectionPercent=100 means outlier detection can potentially eject all of the hosts from the upstream service if they are all considered outliers, leaving the load balancing set with zero hosts</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.PortMapping","title":"PortMapping","text":"<p> (Appears on: Listener,  VirtualRouterListener) </p> <p> <p>PortMapping refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_PortMapping.html</p> </p> Field Description <code>port</code>  PortNumber  <p>The port used for the port mapping.</p> <code>protocol</code>  PortProtocol  <p>The protocol used for the port mapping.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.PortNumber","title":"PortNumber (<code>int64</code> alias)","text":"<p> (Appears on: ClientPolicyTLS,  HealthCheckPolicy,  PortMapping,  VirtualGatewayClientPolicyTLS,  VirtualGatewayHealthCheckPolicy,  VirtualGatewayPortMapping) </p> <p> </p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.PortProtocol","title":"PortProtocol (<code>string</code> alias)","text":"<p> (Appears on: HealthCheckPolicy,  PortMapping) </p> <p> </p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.QueryMatchMethod","title":"QueryMatchMethod","text":"<p> (Appears on: HTTPQueryParameters) </p> <p> </p> Field Description <code>exact</code>  string  (Optional)"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.Route","title":"Route","text":"<p> (Appears on: VirtualRouterSpec) </p> <p> <p>Route refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_RouteSpec.html</p> </p> Field Description <code>name</code>  string  <p>Route\u2019s name</p> <code>grpcRoute</code>  GRPCRoute  (Optional) <p>An object that represents the specification of a gRPC route.</p> <code>httpRoute</code>  HTTPRoute  (Optional) <p>An object that represents the specification of an HTTP route.</p> <code>http2Route</code>  HTTPRoute  (Optional) <p>An object that represents the specification of an HTTP/2 route.</p> <code>tcpRoute</code>  TCPRoute  (Optional) <p>An object that represents the specification of a TCP route.</p> <code>priority</code>  int64  (Optional) <p>The priority for the route.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.ServiceDiscovery","title":"ServiceDiscovery","text":"<p> (Appears on: VirtualNodeSpec) </p> <p> <p>ServiceDiscovery refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_ServiceDiscovery.html</p> </p> Field Description <code>awsCloudMap</code>  AWSCloudMapServiceDiscovery  (Optional) <p>Specifies any AWS Cloud Map information for the virtual node.</p> <code>dns</code>  DNSServiceDiscovery  (Optional) <p>Specifies the DNS information for the virtual node.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.SubjectAlternativeNameMatchers","title":"SubjectAlternativeNameMatchers","text":"<p> (Appears on: SubjectAlternativeNames) </p> <p> </p> Field Description <code>exact</code>  []string  <p>Exact is a required field</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.SubjectAlternativeNames","title":"SubjectAlternativeNames","text":"<p> (Appears on: ListenerTLSValidationContext,  TLSValidationContext,  VirtualGatewayListenerTLSValidationContext,  VirtualGatewayTLSValidationContext) </p> <p> </p> Field Description <code>match</code>  SubjectAlternativeNameMatchers  <p>Match is a required field</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.TCPConnectionPool","title":"TCPConnectionPool","text":"<p> (Appears on: VirtualNodeConnectionPool) </p> <p> </p> Field Description <code>maxConnections</code>  int64  <p>Represents the maximum number of outbound TCP connections the envoy can establish concurrently with all the hosts in the upstream cluster.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.TCPRetryPolicyEvent","title":"TCPRetryPolicyEvent (<code>string</code> alias)","text":"<p> (Appears on: GRPCRetryPolicy,  HTTPRetryPolicy) </p> <p> </p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.TCPRoute","title":"TCPRoute","text":"<p> (Appears on: Route) </p> <p> <p>TCPRoute refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_TcpRoute.html</p> </p> Field Description <code>action</code>  TCPRouteAction  <p>The action to take if a match is determined.</p> <code>match</code>  TcpRouteMatch  (Optional) <p>An object that represents the criteria for determining a request match.</p> <code>timeout</code>  TCPTimeout  (Optional) <p>An object that represents a tcp timeout.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.TCPRouteAction","title":"TCPRouteAction","text":"<p> (Appears on: TCPRoute) </p> <p> <p>TCPRouteAction refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_TcpRouteAction.html</p> </p> Field Description <code>weightedTargets</code>  []WeightedTarget  <p>An object that represents the targets that traffic is routed to when a request matches the route.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.TcpRouteMatch","title":"TcpRouteMatch","text":"<p> (Appears on: TCPRoute) </p> <p> </p> Field Description <code>port</code>  int64  (Optional) <p>The port number to match on.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.TCPTimeout","title":"TCPTimeout","text":"<p> (Appears on: ListenerTimeout,  TCPRoute) </p> <p> </p> Field Description <code>idle</code>  Duration  (Optional) <p>An object that represents idle timeout duration.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.TLSValidationContext","title":"TLSValidationContext","text":"<p> (Appears on: ClientPolicyTLS) </p> <p> <p>TLSValidationContext refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_TlsValidationContext.html</p> </p> Field Description <code>trust</code>  TLSValidationContextTrust  <p>A reference to an object that represents a TLS validation context trust</p> <code>subjectAlternativeNames</code>  SubjectAlternativeNames  (Optional) <p>Possible Alternative names to consider</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.TLSValidationContextACMTrust","title":"TLSValidationContextACMTrust","text":"<p> (Appears on: TLSValidationContextTrust) </p> <p> <p>TLSValidationContextACMTrust refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_TlsValidationContextAcmTrust.html</p> </p> Field Description <code>certificateAuthorityARNs</code>  []string  <p>One or more ACM Amazon Resource Name (ARN)s.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.TLSValidationContextFileTrust","title":"TLSValidationContextFileTrust","text":"<p> (Appears on: ListenerTLSValidationContextTrust,  TLSValidationContextTrust) </p> <p> <p>TLSValidationContextFileTrust refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_TlsValidationContextFileTrust.html</p> </p> Field Description <code>certificateChain</code>  string  <p>The certificate trust chain for a certificate stored on the file system of the virtual node that the proxy is running on.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.TLSValidationContextSDSTrust","title":"TLSValidationContextSDSTrust","text":"<p> (Appears on: ListenerTLSValidationContextTrust,  TLSValidationContextTrust) </p> <p> <p>TLSValidationContextSDSTrust refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_TlsValidationContextFileTrust.html</p> </p> Field Description <code>secretName</code>  string  <p>The certificate trust chain for a certificate obtained via SDS</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.TLSValidationContextTrust","title":"TLSValidationContextTrust","text":"<p> (Appears on: TLSValidationContext) </p> <p> <p>TLSValidationContextTrust refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_TlsValidationContextTrust.html</p> </p> Field Description <code>acm</code>  TLSValidationContextACMTrust  (Optional) <p>A reference to an object that represents a TLS validation context trust for an AWS Certicate Manager (ACM) certificate.</p> <code>file</code>  TLSValidationContextFileTrust  (Optional) <p>An object that represents a TLS validation context trust for a local file.</p> <code>sds</code>  TLSValidationContextSDSTrust  (Optional) <p>An object that represents a TLS validation context trust for a SDS.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGateway","title":"VirtualGateway","text":"<p> <p>VirtualGateway is the Schema for the virtualgateways API</p> </p> Field Description <code>metadata</code>  Kubernetes meta/v1.ObjectMeta   Refer to the Kubernetes API documentation for the fields of the <code>metadata</code> field.  <code>spec</code>  VirtualGatewaySpec  <code>awsName</code>  string  (Optional) <p>AWSName is the AppMesh VirtualGateway object\u2019s name. If unspecified or empty, it defaults to be \u201c${name}_${namespace}\u201d of k8s VirtualGateway</p> <code>namespaceSelector</code>  Kubernetes meta/v1.LabelSelector  (Optional) <p>NamespaceSelector selects Namespaces using labels to designate GatewayRoute membership. This field follows standard label selector semantics; if present but empty, it selects all namespaces.</p> <code>podSelector</code>  Kubernetes meta/v1.LabelSelector  (Optional) <p>PodSelector selects Pods using labels to designate VirtualGateway membership. This field follows standard label selector semantics: if present but empty, it selects all pods within namespace. if absent, it selects no pod.</p> <code>gatewayRouteSelector</code>  Kubernetes meta/v1.LabelSelector  (Optional) <p>GatewayRouteSelector selects GatewayRoutes using labels to designate GatewayRoute membership. If not specified it selects all GatewayRoutes in that namespace.</p> <code>listeners</code>  []VirtualGatewayListener  <p>The listener that the virtual gateway is expected to receive inbound traffic from</p> <code>logging</code>  VirtualGatewayLogging  (Optional) <p>The inbound and outbound access logging information for the virtual gateway.</p> <code>backendDefaults</code>  VirtualGatewayBackendDefaults  (Optional) <p>A reference to an object that represents the defaults for backend GatewayRoutes.</p> <code>meshRef</code>  MeshReference  (Optional) <p>A reference to k8s Mesh CR that this VirtualGateway belongs to. The admission controller populates it using Meshes\u2019s selector, and prevents users from setting this field.</p> <p>Populated by the system. Read-only.</p> <code>status</code>  VirtualGatewayStatus"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayAccessLog","title":"VirtualGatewayAccessLog","text":"<p> (Appears on: VirtualGatewayLogging) </p> <p> <p>VirtualGatewayAccessLog refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>file</code>  VirtualGatewayFileAccessLog  (Optional) <p>The file object to send virtual gateway access logs to.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayBackendDefaults","title":"VirtualGatewayBackendDefaults","text":"<p> (Appears on: VirtualGatewaySpec) </p> <p> <p>VirtualGatewayBackendDefaults refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>clientPolicy</code>  VirtualGatewayClientPolicy  (Optional) <p>A reference to an object that represents a client policy.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayClientPolicy","title":"VirtualGatewayClientPolicy","text":"<p> (Appears on: VirtualGatewayBackendDefaults) </p> <p> <p>VirtualGatewayClientPolicy refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>tls</code>  VirtualGatewayClientPolicyTLS  (Optional) <p>A reference to an object that represents a Transport Layer Security (TLS) client policy.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayClientPolicyTLS","title":"VirtualGatewayClientPolicyTLS","text":"<p> (Appears on: VirtualGatewayClientPolicy) </p> <p> <p>VirtualGatewayClientPolicyTLS refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>enforce</code>  bool  (Optional) <p>Whether the policy is enforced. If unspecified, default settings from AWS API will be applied. Refer to AWS Docs for default settings.</p> <code>ports</code>  []PortNumber  (Optional) <p>The range of ports that the policy is enforced for.</p> <code>certificate</code>  VirtualGatewayClientTLSCertificate  (Optional) <p>A reference to an object that represents TLS certificate.</p> <code>validation</code>  VirtualGatewayTLSValidationContext  <p>A reference to an object that represents a TLS validation context.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayClientTLSCertificate","title":"VirtualGatewayClientTLSCertificate","text":"<p> (Appears on: VirtualGatewayClientPolicyTLS) </p> <p> <p>VirtualGatewayTLSValidationContext refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>file</code>  VirtualGatewayListenerTLSFileCertificate  (Optional) <p>An object that represents a TLS cert via a local file</p> <code>sds</code>  VirtualGatewayListenerTLSSDSCertificate  (Optional) <p>An object that represents a TLS cert via SDS entry</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayCondition","title":"VirtualGatewayCondition","text":"<p> (Appears on: VirtualGatewayStatus) </p> <p> </p> Field Description <code>type</code>  VirtualGatewayConditionType  <p>Type of VirtualGateway condition.</p> <code>status</code>  Kubernetes core/v1.ConditionStatus  <p>Status of the condition, one of True, False, Unknown.</p> <code>lastTransitionTime</code>  Kubernetes meta/v1.Time  (Optional) <p>Last time the condition transitioned from one status to another.</p> <code>reason</code>  string  (Optional) <p>The reason for the condition\u2019s last transition.</p> <code>message</code>  string  (Optional) <p>A human readable message indicating details about the transition.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayConditionType","title":"VirtualGatewayConditionType (<code>string</code> alias)","text":"<p> (Appears on: VirtualGatewayCondition) </p> <p> </p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayConnectionPool","title":"VirtualGatewayConnectionPool","text":"<p> (Appears on: VirtualGatewayListener) </p> <p> <p>VirtualGatewayConnectionPool refers to the connection pools settings for Virtual Gateway. Connection pool limits the number of connections that an Envoy can concurrently establish with all the hosts in the upstream cluster. Currently connection pool is supported only at the listener level and it is intended protect your local application from being overwhelmed with connections.</p> </p> Field Description <code>http</code>  HTTPConnectionPool  (Optional) <p>Specifies http connection pool settings for the virtual gateway listener</p> <code>http2</code>  HTTP2ConnectionPool  (Optional) <p>Specifies http2 connection pool settings for the virtual gateway listener</p> <code>grpc</code>  GRPCConnectionPool  (Optional) <p>Specifies grpc connection pool settings for the virtual gateway listener</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayFileAccessLog","title":"VirtualGatewayFileAccessLog","text":"<p> (Appears on: VirtualGatewayAccessLog) </p> <p> <p>VirtualGatewayFileAccessLog refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>path</code>  string  <p>The file path to write access logs to.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayHealthCheckPolicy","title":"VirtualGatewayHealthCheckPolicy","text":"<p> (Appears on: VirtualGatewayListener) </p> <p> <p>VirtualGatewayHealthCheckPolicy refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>healthyThreshold</code>  int64  (Optional) <p>The number of consecutive successful health checks that must occur before declaring listener healthy.</p> <code>intervalMillis</code>  int64  <p>The time period in milliseconds between each health check execution.</p> <code>path</code>  string  (Optional) <p>The destination path for the health check request. This value is only used if the specified protocol is http or http2. For any other protocol, this value is ignored.</p> <code>port</code>  PortNumber  (Optional) <p>The destination port for the health check request.</p> <code>protocol</code>  VirtualGatewayPortProtocol  <p>The protocol for the health check request</p> <code>timeoutMillis</code>  int64  <p>The amount of time to wait when receiving a response from the health check, in milliseconds.</p> <code>unhealthyThreshold</code>  int64  <p>The number of consecutive failed health checks that must occur before declaring a virtual Gateway unhealthy.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayListener","title":"VirtualGatewayListener","text":"<p> (Appears on: VirtualGatewaySpec) </p> <p> <p>VirtualGatewayListener refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>portMapping</code>  VirtualGatewayPortMapping  <p>The port mapping information for the listener.</p> <code>healthCheck</code>  VirtualGatewayHealthCheckPolicy  (Optional) <p>The health check information for the listener.</p> <code>connectionPool</code>  VirtualGatewayConnectionPool  (Optional) <p>The connection pool settings for the listener</p> <code>tls</code>  VirtualGatewayListenerTLS  (Optional) <p>A reference to an object that represents the Transport Layer Security (TLS) properties for a listener.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayListenerTLS","title":"VirtualGatewayListenerTLS","text":"<p> (Appears on: VirtualGatewayListener) </p> <p> <p>VirtualGatewayListenerTLS refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>certificate</code>  VirtualGatewayListenerTLSCertificate  <p>A reference to an object that represents a listener\u2019s TLS certificate.</p> <code>validation</code>  VirtualGatewayListenerTLSValidationContext  (Optional) <p>A reference to an object that represents Validation context</p> <code>mode</code>  VirtualGatewayListenerTLSMode  <p>ListenerTLS mode</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayListenerTLSACMCertificate","title":"VirtualGatewayListenerTLSACMCertificate","text":"<p> (Appears on: VirtualGatewayListenerTLSCertificate) </p> <p> <p>VirtualGatewayListenerTLSACMCertificate refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>certificateARN</code>  string  <p>The Amazon Resource Name (ARN) for the certificate.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayListenerTLSCertificate","title":"VirtualGatewayListenerTLSCertificate","text":"<p> (Appears on: VirtualGatewayListenerTLS) </p> <p> <p>VirtualGatewayListenerTLSCertificate refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>acm</code>  VirtualGatewayListenerTLSACMCertificate  (Optional) <p>A reference to an object that represents an AWS Certificate Manager (ACM) certificate.</p> <code>file</code>  VirtualGatewayListenerTLSFileCertificate  (Optional) <p>A reference to an object that represents a local file certificate.</p> <code>sds</code>  VirtualGatewayListenerTLSSDSCertificate  (Optional) <p>A reference to an object that represents an SDS issued certificate</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayListenerTLSFileCertificate","title":"VirtualGatewayListenerTLSFileCertificate","text":"<p> (Appears on: VirtualGatewayClientTLSCertificate,  VirtualGatewayListenerTLSCertificate) </p> <p> <p>VirtualGatewayListenerTLSFileCertificate refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>certificateChain</code>  string  <p>The certificate chain for the certificate.</p> <code>privateKey</code>  string  <p>The private key for a certificate stored on the file system of the virtual Gateway.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayListenerTLSMode","title":"VirtualGatewayListenerTLSMode (<code>string</code> alias)","text":"<p> (Appears on: VirtualGatewayListenerTLS) </p> <p> </p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayListenerTLSSDSCertificate","title":"VirtualGatewayListenerTLSSDSCertificate","text":"<p> (Appears on: VirtualGatewayClientTLSCertificate,  VirtualGatewayListenerTLSCertificate) </p> <p> </p> Field Description <code>secretName</code>  string  <p>The certificate trust chain for a certificate issued via SDS cluster</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayListenerTLSValidationContext","title":"VirtualGatewayListenerTLSValidationContext","text":"<p> (Appears on: VirtualGatewayListenerTLS) </p> <p> <p>VirtualGatewayListenerTLSCertificate refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>trust</code>  VirtualGatewayListenerTLSValidationContextTrust  <code>subjectAlternativeNames</code>  SubjectAlternativeNames  (Optional) <p>Possible alternate names to consider</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayListenerTLSValidationContextTrust","title":"VirtualGatewayListenerTLSValidationContextTrust","text":"<p> (Appears on: VirtualGatewayListenerTLSValidationContext) </p> <p> </p> Field Description <code>acm</code>  VirtualGatewayTLSValidationContextACMTrust  (Optional) <p>A reference to an object that represents a TLS validation context trust for an AWS Certicate Manager (ACM) certificate.</p> <code>file</code>  VirtualGatewayTLSValidationContextFileTrust  (Optional) <p>An object that represents a TLS validation context trust for a local file.</p> <code>sds</code>  VirtualGatewayTLSValidationContextSDSTrust  (Optional) <p>An object that represents a TLS validation context trust for an SDS system</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayLogging","title":"VirtualGatewayLogging","text":"<p> (Appears on: VirtualGatewaySpec) </p> <p> <p>VirtualGatewayLogging refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>accessLog</code>  VirtualGatewayAccessLog  (Optional) <p>The access log configuration for a virtual Gateway.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayPortMapping","title":"VirtualGatewayPortMapping","text":"<p> (Appears on: VirtualGatewayListener) </p> <p> <p>VirtualGatewayPortMapping refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>port</code>  PortNumber  <p>The port used for the port mapping.</p> <code>protocol</code>  VirtualGatewayPortProtocol  <p>The protocol used for the port mapping.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayPortProtocol","title":"VirtualGatewayPortProtocol (<code>string</code> alias)","text":"<p> (Appears on: VirtualGatewayHealthCheckPolicy,  VirtualGatewayPortMapping) </p> <p> </p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayReference","title":"VirtualGatewayReference","text":"<p> (Appears on: GatewayRouteSpec) </p> <p> <p>VirtualGatewayReference holds a reference to VirtualGateway.appmesh.k8s.aws</p> </p> Field Description <code>namespace</code>  string  (Optional) <p>Namespace is the namespace of VirtualGateway CR. If unspecified, defaults to the referencing object\u2019s namespace</p> <code>name</code>  string  <p>Name is the name of VirtualGateway CR</p> <code>uid</code>  k8s.io/apimachinery/pkg/types.UID  <p>UID is the UID of VirtualGateway CR</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewaySpec","title":"VirtualGatewaySpec","text":"<p> (Appears on: VirtualGateway) </p> <p> <p>VirtualGatewaySpec defines the desired state of VirtualGateway refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>awsName</code>  string  (Optional) <p>AWSName is the AppMesh VirtualGateway object\u2019s name. If unspecified or empty, it defaults to be \u201c${name}_${namespace}\u201d of k8s VirtualGateway</p> <code>namespaceSelector</code>  Kubernetes meta/v1.LabelSelector  (Optional) <p>NamespaceSelector selects Namespaces using labels to designate GatewayRoute membership. This field follows standard label selector semantics; if present but empty, it selects all namespaces.</p> <code>podSelector</code>  Kubernetes meta/v1.LabelSelector  (Optional) <p>PodSelector selects Pods using labels to designate VirtualGateway membership. This field follows standard label selector semantics: if present but empty, it selects all pods within namespace. if absent, it selects no pod.</p> <code>gatewayRouteSelector</code>  Kubernetes meta/v1.LabelSelector  (Optional) <p>GatewayRouteSelector selects GatewayRoutes using labels to designate GatewayRoute membership. If not specified it selects all GatewayRoutes in that namespace.</p> <code>listeners</code>  []VirtualGatewayListener  <p>The listener that the virtual gateway is expected to receive inbound traffic from</p> <code>logging</code>  VirtualGatewayLogging  (Optional) <p>The inbound and outbound access logging information for the virtual gateway.</p> <code>backendDefaults</code>  VirtualGatewayBackendDefaults  (Optional) <p>A reference to an object that represents the defaults for backend GatewayRoutes.</p> <code>meshRef</code>  MeshReference  (Optional) <p>A reference to k8s Mesh CR that this VirtualGateway belongs to. The admission controller populates it using Meshes\u2019s selector, and prevents users from setting this field.</p> <p>Populated by the system. Read-only.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayStatus","title":"VirtualGatewayStatus","text":"<p> (Appears on: VirtualGateway) </p> <p> <p>VirtualGatewayStatus defines the observed state of VirtualGateway</p> </p> Field Description <code>virtualGatewayARN</code>  string  (Optional) <p>VirtualGatewayARN is the AppMesh VirtualGateway object\u2019s Amazon Resource Name</p> <code>conditions</code>  []VirtualGatewayCondition  (Optional) <p>The current VirtualGateway status.</p> <code>observedGeneration</code>  int64  (Optional) <p>The generation observed by the VirtualGateway controller.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayTLSValidationContext","title":"VirtualGatewayTLSValidationContext","text":"<p> (Appears on: VirtualGatewayClientPolicyTLS) </p> <p> <p>VirtualGatewayTLSValidationContext refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>trust</code>  VirtualGatewayTLSValidationContextTrust  <p>A reference to an object that represents a TLS validation context trust</p> <code>subjectAlternativeNames</code>  SubjectAlternativeNames  (Optional) <p>Possible alternative names to consider</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayTLSValidationContextACMTrust","title":"VirtualGatewayTLSValidationContextACMTrust","text":"<p> (Appears on: VirtualGatewayListenerTLSValidationContextTrust,  VirtualGatewayTLSValidationContextTrust) </p> <p> <p>VirtualGatewayTLSValidationContextACMTrust refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>certificateAuthorityARNs</code>  []string  <p>One or more ACM Amazon Resource Name (ARN)s.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayTLSValidationContextFileTrust","title":"VirtualGatewayTLSValidationContextFileTrust","text":"<p> (Appears on: VirtualGatewayListenerTLSValidationContextTrust,  VirtualGatewayTLSValidationContextTrust) </p> <p> <p>VirtualGatewayTLSValidationContextFileTrust refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>certificateChain</code>  string  <p>The certificate trust chain for a certificate stored on the file system of the virtual Gateway.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayTLSValidationContextSDSTrust","title":"VirtualGatewayTLSValidationContextSDSTrust","text":"<p> (Appears on: VirtualGatewayListenerTLSValidationContextTrust,  VirtualGatewayTLSValidationContextTrust) </p> <p> <p>VirtualGatewayTLSValidationContextSDSTrust refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>secretName</code>  string  <p>The certificate trust chain for a certificate issued via SDS.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualGatewayTLSValidationContextTrust","title":"VirtualGatewayTLSValidationContextTrust","text":"<p> (Appears on: VirtualGatewayTLSValidationContext) </p> <p> <p>VirtualGatewayTLSValidationContextTrust refers to https://docs.aws.amazon.com/app-mesh/latest/userguide/virtual_gateways.html</p> </p> Field Description <code>acm</code>  VirtualGatewayTLSValidationContextACMTrust  (Optional) <p>A reference to an object that represents a TLS validation context trust for an AWS Certicate Manager (ACM) certificate.</p> <code>file</code>  VirtualGatewayTLSValidationContextFileTrust  (Optional) <p>An object that represents a TLS validation context trust for a local file.</p> <code>sds</code>  VirtualGatewayTLSValidationContextSDSTrust  (Optional) <p>An object that represents a TLS validation context trust for a SDS certificate</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualNode","title":"VirtualNode","text":"<p> <p>VirtualNode is the Schema for the virtualnodes API</p> </p> Field Description <code>metadata</code>  Kubernetes meta/v1.ObjectMeta   Refer to the Kubernetes API documentation for the fields of the <code>metadata</code> field.  <code>spec</code>  VirtualNodeSpec  <code>awsName</code>  string  (Optional) <p>AWSName is the AppMesh VirtualNode object\u2019s name. If unspecified or empty, it defaults to be \u201c${name}_${namespace}\u201d of k8s VirtualNode</p> <code>podSelector</code>  Kubernetes meta/v1.LabelSelector  (Optional) <p>PodSelector selects Pods using labels to designate VirtualNode membership. This field follows standard label selector semantics: if present but empty, it selects all pods within namespace. if absent, it selects no pod.</p> <code>listeners</code>  []Listener  (Optional) <p>The listener that the virtual node is expected to receive inbound traffic from</p> <code>serviceDiscovery</code>  ServiceDiscovery  (Optional) <p>The service discovery information for the virtual node. Optional if there is no inbound traffic(no listeners). Mandatory if a listener is specified.</p> <code>backends</code>  []Backend  (Optional) <p>The backends that the virtual node is expected to send outbound traffic to.</p> <code>backendDefaults</code>  BackendDefaults  (Optional) <p>A reference to an object that represents the defaults for backends.</p> <code>logging</code>  Logging  (Optional) <p>The inbound and outbound access logging information for the virtual node.</p> <code>meshRef</code>  MeshReference  (Optional) <p>A reference to k8s Mesh CR that this VirtualNode belongs to. The admission controller populates it using Meshes\u2019s selector, and prevents users from setting this field.</p> <p>Populated by the system. Read-only.</p> <code>status</code>  VirtualNodeStatus"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualNodeCondition","title":"VirtualNodeCondition","text":"<p> (Appears on: VirtualNodeStatus) </p> <p> </p> Field Description <code>type</code>  VirtualNodeConditionType  <p>Type of VirtualNode condition.</p> <code>status</code>  Kubernetes core/v1.ConditionStatus  <p>Status of the condition, one of True, False, Unknown.</p> <code>lastTransitionTime</code>  Kubernetes meta/v1.Time  (Optional) <p>Last time the condition transitioned from one status to another.</p> <code>reason</code>  string  (Optional) <p>The reason for the condition\u2019s last transition.</p> <code>message</code>  string  (Optional) <p>A human readable message indicating details about the transition.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualNodeConditionType","title":"VirtualNodeConditionType (<code>string</code> alias)","text":"<p> (Appears on: VirtualNodeCondition) </p> <p> </p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualNodeConnectionPool","title":"VirtualNodeConnectionPool","text":"<p> (Appears on: Listener) </p> <p> <p>VirtualNodeConnectionPool refers to the connection pools settings for Virtual Node. Connection pool limits the number of connections that an Envoy can concurrently establish with all the hosts in the upstream cluster. Currently connection pool is supported only at the listener level and it is intended protect your local application from being overwhelmed with connections.</p> </p> Field Description <code>tcp</code>  TCPConnectionPool  (Optional) <p>Specifies tcp connection pool settings for the virtual node listener</p> <code>http</code>  HTTPConnectionPool  (Optional) <p>Specifies http connection pool settings for the virtual node listener</p> <code>http2</code>  HTTP2ConnectionPool  (Optional) <p>Specifies http2 connection pool settings for the virtual node listener</p> <code>grpc</code>  GRPCConnectionPool  (Optional) <p>Specifies grpc connection pool settings for the virtual node listener</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualNodeReference","title":"VirtualNodeReference","text":"<p> (Appears on: VirtualNodeServiceProvider,  WeightedTarget) </p> <p> <p>VirtualNodeReference holds a reference to VirtualNode.appmesh.k8s.aws</p> </p> Field Description <code>namespace</code>  string  (Optional) <p>Namespace is the namespace of VirtualNode CR. If unspecified, defaults to the referencing object\u2019s namespace</p> <code>name</code>  string  <p>Name is the name of VirtualNode CR</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualNodeServiceProvider","title":"VirtualNodeServiceProvider","text":"<p> (Appears on: VirtualServiceProvider) </p> <p> <p>VirtualNodeServiceProvider refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_VirtualNodeServiceProvider.html</p> </p> Field Description <code>virtualNodeRef</code>  VirtualNodeReference  (Optional) <p>Reference to Kubernetes VirtualNode CR in cluster that is acting as a service provider. Exactly one of \u2018virtualNodeRef\u2019 or \u2018virtualNodeARN\u2019 must be specified.</p> <code>virtualNodeARN</code>  string  (Optional) <p>Amazon Resource Name to AppMesh VirtualNode object that is acting as a service provider. Exactly one of \u2018virtualNodeRef\u2019 or \u2018virtualNodeARN\u2019 must be specified.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualNodeSpec","title":"VirtualNodeSpec","text":"<p> (Appears on: VirtualNode) </p> <p> <p>VirtualNodeSpec defines the desired state of VirtualNode refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_VirtualNodeSpec.html</p> </p> Field Description <code>awsName</code>  string  (Optional) <p>AWSName is the AppMesh VirtualNode object\u2019s name. If unspecified or empty, it defaults to be \u201c${name}_${namespace}\u201d of k8s VirtualNode</p> <code>podSelector</code>  Kubernetes meta/v1.LabelSelector  (Optional) <p>PodSelector selects Pods using labels to designate VirtualNode membership. This field follows standard label selector semantics: if present but empty, it selects all pods within namespace. if absent, it selects no pod.</p> <code>listeners</code>  []Listener  (Optional) <p>The listener that the virtual node is expected to receive inbound traffic from</p> <code>serviceDiscovery</code>  ServiceDiscovery  (Optional) <p>The service discovery information for the virtual node. Optional if there is no inbound traffic(no listeners). Mandatory if a listener is specified.</p> <code>backends</code>  []Backend  (Optional) <p>The backends that the virtual node is expected to send outbound traffic to.</p> <code>backendDefaults</code>  BackendDefaults  (Optional) <p>A reference to an object that represents the defaults for backends.</p> <code>logging</code>  Logging  (Optional) <p>The inbound and outbound access logging information for the virtual node.</p> <code>meshRef</code>  MeshReference  (Optional) <p>A reference to k8s Mesh CR that this VirtualNode belongs to. The admission controller populates it using Meshes\u2019s selector, and prevents users from setting this field.</p> <p>Populated by the system. Read-only.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualNodeStatus","title":"VirtualNodeStatus","text":"<p> (Appears on: VirtualNode) </p> <p> <p>VirtualNodeStatus defines the observed state of VirtualNode</p> </p> Field Description <code>virtualNodeARN</code>  string  (Optional) <p>VirtualNodeARN is the AppMesh VirtualNode object\u2019s Amazon Resource Name</p> <code>conditions</code>  []VirtualNodeCondition  (Optional) <p>The current VirtualNode status.</p> <code>observedGeneration</code>  int64  (Optional) <p>The generation observed by the VirtualNode controller.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualRouter","title":"VirtualRouter","text":"<p> <p>VirtualRouter is the Schema for the virtualrouters API</p> </p> Field Description <code>metadata</code>  Kubernetes meta/v1.ObjectMeta   Refer to the Kubernetes API documentation for the fields of the <code>metadata</code> field.  <code>spec</code>  VirtualRouterSpec  <code>awsName</code>  string  (Optional) <p>AWSName is the AppMesh VirtualRouter object\u2019s name. If unspecified or empty, it defaults to be \u201c${name}_${namespace}\u201d of k8s VirtualRouter</p> <code>listeners</code>  []VirtualRouterListener  <p>The listeners that the virtual router is expected to receive inbound traffic from</p> <code>routes</code>  []Route  (Optional) <p>The routes associated with VirtualRouter</p> <code>meshRef</code>  MeshReference  (Optional) <p>A reference to k8s Mesh CR that this VirtualRouter belongs to. The admission controller populates it using Meshes\u2019s selector, and prevents users from setting this field.</p> <p>Populated by the system. Read-only.</p> <code>status</code>  VirtualRouterStatus"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualRouterCondition","title":"VirtualRouterCondition","text":"<p> (Appears on: VirtualRouterStatus) </p> <p> </p> Field Description <code>type</code>  VirtualRouterConditionType  <p>Type of VirtualRouter condition.</p> <code>status</code>  Kubernetes core/v1.ConditionStatus  <p>Status of the condition, one of True, False, Unknown.</p> <code>lastTransitionTime</code>  Kubernetes meta/v1.Time  (Optional) <p>Last time the condition transitioned from one status to another.</p> <code>reason</code>  string  (Optional) <p>The reason for the condition\u2019s last transition.</p> <code>message</code>  string  (Optional) <p>A human readable message indicating details about the transition.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualRouterConditionType","title":"VirtualRouterConditionType (<code>string</code> alias)","text":"<p> (Appears on: VirtualRouterCondition) </p> <p> </p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualRouterListener","title":"VirtualRouterListener","text":"<p> (Appears on: VirtualRouterSpec) </p> <p> <p>VirtualRouterListener refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_VirtualRouterListener.html</p> </p> Field Description <code>portMapping</code>  PortMapping  <p>The port mapping information for the listener.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualRouterReference","title":"VirtualRouterReference","text":"<p> (Appears on: VirtualRouterServiceProvider) </p> <p> <p>VirtualRouterReference holds a reference to VirtualRouter.appmesh.k8s.aws</p> </p> Field Description <code>namespace</code>  string  (Optional) <p>Namespace is the namespace of VirtualRouter CR. If unspecified, defaults to the referencing object\u2019s namespace</p> <code>name</code>  string  <p>Name is the name of VirtualRouter CR</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualRouterServiceProvider","title":"VirtualRouterServiceProvider","text":"<p> (Appears on: VirtualServiceProvider) </p> <p> <p>VirtualRouterServiceProvider refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_VirtualRouterServiceProvider.html</p> </p> Field Description <code>virtualRouterRef</code>  VirtualRouterReference  (Optional) <p>Reference to Kubernetes VirtualRouter CR in cluster that is acting as a service provider. Exactly one of \u2018virtualRouterRef\u2019 or \u2018virtualRouterARN\u2019 must be specified.</p> <code>virtualRouterARN</code>  string  (Optional) <p>Amazon Resource Name to AppMesh VirtualRouter object that is acting as a service provider. Exactly one of \u2018virtualRouterRef\u2019 or \u2018virtualRouterARN\u2019 must be specified.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualRouterSpec","title":"VirtualRouterSpec","text":"<p> (Appears on: VirtualRouter) </p> <p> <p>VirtualRouterSpec defines the desired state of VirtualRouter refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_VirtualRouterSpec.html</p> </p> Field Description <code>awsName</code>  string  (Optional) <p>AWSName is the AppMesh VirtualRouter object\u2019s name. If unspecified or empty, it defaults to be \u201c${name}_${namespace}\u201d of k8s VirtualRouter</p> <code>listeners</code>  []VirtualRouterListener  <p>The listeners that the virtual router is expected to receive inbound traffic from</p> <code>routes</code>  []Route  (Optional) <p>The routes associated with VirtualRouter</p> <code>meshRef</code>  MeshReference  (Optional) <p>A reference to k8s Mesh CR that this VirtualRouter belongs to. The admission controller populates it using Meshes\u2019s selector, and prevents users from setting this field.</p> <p>Populated by the system. Read-only.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualRouterStatus","title":"VirtualRouterStatus","text":"<p> (Appears on: VirtualRouter) </p> <p> <p>VirtualRouterStatus defines the observed state of VirtualRouter</p> </p> Field Description <code>virtualRouterARN</code>  string  (Optional) <p>VirtualRouterARN is the AppMesh VirtualRouter object\u2019s Amazon Resource Name.</p> <code>routeARNs</code>  map[string]string  (Optional) <p>RouteARNs is a map of AppMesh Route objects\u2019 Amazon Resource Names, indexed by route name.</p> <code>conditions</code>  []VirtualRouterCondition  (Optional) <p>The current VirtualRouter status.</p> <code>observedGeneration</code>  int64  (Optional) <p>The generation observed by the VirtualRouter controller.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualService","title":"VirtualService","text":"<p> <p>VirtualService is the Schema for the virtualservices API</p> </p> Field Description <code>metadata</code>  Kubernetes meta/v1.ObjectMeta   Refer to the Kubernetes API documentation for the fields of the <code>metadata</code> field.  <code>spec</code>  VirtualServiceSpec  <code>awsName</code>  string  (Optional) <p>AWSName is the AppMesh VirtualService object\u2019s name. If unspecified or empty, it defaults to be \u201c${name}.${namespace}\u201d of k8s VirtualService</p> <code>provider</code>  VirtualServiceProvider  (Optional) <p>The provider for virtual services. You can specify a single virtual node or virtual router.</p> <code>meshRef</code>  MeshReference  (Optional) <p>A reference to k8s Mesh CR that this VirtualService belongs to. The admission controller populates it using Meshes\u2019s selector, and prevents users from setting this field.</p> <p>Populated by the system. Read-only.</p> <code>status</code>  VirtualServiceStatus"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualServiceBackend","title":"VirtualServiceBackend","text":"<p> (Appears on: Backend) </p> <p> <p>VirtualServiceBackend refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_VirtualServiceBackend.html</p> </p> Field Description <code>virtualServiceRef</code>  VirtualServiceReference  (Optional) <p>Reference to Kubernetes VirtualService CR in cluster that is acting as a virtual node backend. Exactly one of \u2018virtualServiceRef\u2019 or \u2018virtualServiceARN\u2019 must be specified.</p> <code>virtualServiceARN</code>  string  (Optional) <p>Amazon Resource Name to AppMesh VirtualService object that is acting as a virtual node backend. Exactly one of \u2018virtualServiceRef\u2019 or \u2018virtualServiceARN\u2019 must be specified.</p> <code>clientPolicy</code>  ClientPolicy  (Optional) <p>A reference to an object that represents the client policy for a backend.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualServiceCondition","title":"VirtualServiceCondition","text":"<p> (Appears on: VirtualServiceStatus) </p> <p> </p> Field Description <code>type</code>  VirtualServiceConditionType  <p>Type of VirtualService condition.</p> <code>status</code>  Kubernetes core/v1.ConditionStatus  <p>Status of the condition, one of True, False, Unknown.</p> <code>lastTransitionTime</code>  Kubernetes meta/v1.Time  (Optional) <p>Last time the condition transitioned from one status to another.</p> <code>reason</code>  string  (Optional) <p>The reason for the condition\u2019s last transition.</p> <code>message</code>  string  (Optional) <p>A human readable message indicating details about the transition.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualServiceConditionType","title":"VirtualServiceConditionType (<code>string</code> alias)","text":"<p> (Appears on: VirtualServiceCondition) </p> <p> </p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualServiceProvider","title":"VirtualServiceProvider","text":"<p> (Appears on: VirtualServiceSpec) </p> <p> <p>VirtualServiceProvider refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_VirtualServiceProvider.html</p> </p> Field Description <code>virtualNode</code>  VirtualNodeServiceProvider  (Optional) <p>The virtual node associated with a virtual service.</p> <code>virtualRouter</code>  VirtualRouterServiceProvider  (Optional) <p>The virtual router associated with a virtual service.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualServiceReference","title":"VirtualServiceReference","text":"<p> (Appears on: GatewayRouteVirtualService,  VirtualServiceBackend) </p> <p> <p>VirtualServiceReference holds a reference to VirtualService.appmesh.k8s.aws</p> </p> Field Description <code>namespace</code>  string  (Optional) <p>Namespace is the namespace of VirtualService CR. If unspecified, defaults to the referencing object\u2019s namespace</p> <code>name</code>  string  <p>Name is the name of VirtualService CR</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualServiceSpec","title":"VirtualServiceSpec","text":"<p> (Appears on: VirtualService) </p> <p> <p>VirtualServiceSpec defines the desired state of VirtualService refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_VirtualServiceSpec.html</p> </p> Field Description <code>awsName</code>  string  (Optional) <p>AWSName is the AppMesh VirtualService object\u2019s name. If unspecified or empty, it defaults to be \u201c${name}.${namespace}\u201d of k8s VirtualService</p> <code>provider</code>  VirtualServiceProvider  (Optional) <p>The provider for virtual services. You can specify a single virtual node or virtual router.</p> <code>meshRef</code>  MeshReference  (Optional) <p>A reference to k8s Mesh CR that this VirtualService belongs to. The admission controller populates it using Meshes\u2019s selector, and prevents users from setting this field.</p> <p>Populated by the system. Read-only.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.VirtualServiceStatus","title":"VirtualServiceStatus","text":"<p> (Appears on: VirtualService) </p> <p> <p>VirtualServiceStatus defines the observed state of VirtualService</p> </p> Field Description <code>virtualServiceARN</code>  string  (Optional) <p>VirtualServiceARN is the AppMesh VirtualService object\u2019s Amazon Resource Name.</p> <code>conditions</code>  []VirtualServiceCondition  (Optional) <p>The current VirtualService status.</p> <code>observedGeneration</code>  int64  (Optional) <p>The generation observed by the VirtualService controller.</p>"},{"location":"reference/api_spec/#appmesh.k8s.aws/v1beta2.WeightedTarget","title":"WeightedTarget","text":"<p> (Appears on: GRPCRouteAction,  HTTPRouteAction,  TCPRouteAction) </p> <p> <p>WeightedTarget refers to https://docs.aws.amazon.com/app-mesh/latest/APIReference/API_WeightedTarget.html</p> </p> Field Description <code>virtualNodeRef</code>  VirtualNodeReference  (Optional) <p>Reference to Kubernetes VirtualNode CR in cluster to associate with the weighted target. Exactly one of \u2018virtualNodeRef\u2019 or \u2018virtualNodeARN\u2019 must be specified.</p> <code>virtualNodeARN</code>  string  (Optional) <p>Amazon Resource Name to AppMesh VirtualNode object to associate with the weighted target. Exactly one of \u2018virtualNodeRef\u2019 or \u2018virtualNodeARN\u2019 must be specified.</p> <code>weight</code>  int64  <p>The relative weight of the weighted target.</p>"},{"location":"reference/backend_groups/","title":"BackendGroup CRD","text":""},{"location":"reference/backend_groups/#backend-groups","title":"Backend Groups","text":"<p>Backend Groups are an experimental feature aimed at simplifying the process of defining backends for VirtualNodes.  </p>"},{"location":"reference/backend_groups/#enabling-backend-groups","title":"Enabling Backend Groups","text":"<p>To use Backend Groups, include the flag <code>enableBackendGroups=true</code> in your controller deployment.</p>"},{"location":"reference/backend_groups/#backendgroup-spec","title":"BackendGroup Spec","text":"<p>A Backend Group defines a set of VirtualService backends that can be added to VirtualNodes.</p> <p>Here is a sample spec with a Backend Group containing 3 VirtualServices. This group is applied to a VirtualNode.</p> <pre><code>apiVersion: appmesh.k8s.aws/v1beta2\nkind: BackendGroup\nmetadata:\n  name: color-group\n  namespace: ${APP_NAMESPACE}\nspec:\n  virtualservices:\n    - name: green\n      namespace: namespace-1\n    - name: red\n      namespace: namespace-1\n    - name: yellow\n      namespace: namespace-2\n---\napiVersion: appmesh.k8s.aws/v1beta2\nkind: VirtualNode\nmetadata:\n  name: color-node\n  namespace: ${APP_NAMESPACE}\nspec:\n  backendGroups:\n    - name: color-group\n      namespace: ${APP_NAMESPACE}\n---\n</code></pre> <p>VirtualNode <code>color-node</code> will be able to use <code>green</code>, <code>red</code>, and <code>yellow</code> as backends.</p> <p>Additionally, in the VirtualNode <code>backendGroups</code> field, specifying <code>*</code> as the Backend Group name will automatically add all VirtualServices in the specified namespace. <pre><code>backendGroups:\n  - name: *\n    namespace: color-namespace\n</code></pre> This allows any VirtualService in <code>color-namespace</code> to be a backend of the VirtualNode.</p>"},{"location":"reference/injector/","title":"Sidecar installation","text":"<p>In order to use AWS App Mesh in Kubernetes, pods in the mesh must be running the AWS App Mesh sidecar proxy (Envoy).</p> <p>The following sections describe methods for injecting sidecar/Envoy into a pod for Virtual Nodes and Virtual Gateways.</p>"},{"location":"reference/injector/#envoy-injection-for-virtual-nodes","title":"Envoy injection for virtual nodes","text":"<p>Sidecars can be automatically added to Kubernetes pods using a mutating webhook admission controller as part of the App Mesh Kubernetes controller.</p> <p>App Mesh uses namespace and/or pod annotations to determine if pods in a namespace will be marked for sidecar injection. There are two ways to achieve this:</p> <p><code>appmesh.k8s.aws/sidecarInjectorWebhook: enabled</code>: The sidecar injector will inject the sidecar into pods by default. Add the <code>appmesh.k8s.aws/sidecarInjectorWebhook</code> annotation with value <code>disabled</code> to the pod template spec to override the default and disable injection. For example:</p> <pre><code>apiVersion: v1\nkind: Namespace\nmetadata:\n  name: default-enabled\n  labels:\n    mesh: default-enabled\n    appmesh.k8s.aws/sidecarInjectorWebhook: enabled\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: default-behavior // sidecar will be injected as namespace has sidecar injection enabled\n  namespace: default-enabled\nspec:\n  template:\n    spec:\n      containers:\n      - name: default-behavior\n        image: tutum/curl\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: override-default-enabled\n  namespace: default-enabled\nspec:\n  template:\n    metadata:\n      annotations:\n        appmesh.k8s.aws/sidecarInjectorWebhook: disabled // this will override the default and disable inject sidecar\n    spec:\n      containers:\n      - name: override-default-enabled\n        image: tutum/curl\n</code></pre> <p><code>appmesh.k8s.aws/sidecarInjectorWebhook: disabled</code>: The sidecar injector will not inject the sidecar into pods by default. Add the <code>appmesh.k8s.aws/sidecarInjectorWebhook</code> annotation with value <code>enabled</code> to the pod template spec to override the default and enable injection.</p> <pre><code>apiVersion: v1\nkind: Namespace\nmetadata:\n  name: default-disabled\n  labels:\n    mesh: default-disabled\n    appmesh.k8s.aws/sidecarInjectorWebhook: disabled\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: default-behavior // sidecar will be not injected as namespace has sidecar injection disabled\n  namespace: default-disabled\nspec:\n  template:\n    spec:\n      containers:\n      - name: default-behavior\n        image: tutum/curl\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: override-default-disabled\n  namespace: default-disabled\nspec:\n  template:\n    metadata:\n      annotations:\n        appmesh.k8s.aws/sidecarInjectorWebhook: enabled // this will override the default and inject sidecar\n    spec:\n      containers:\n      - name: override-default-disabled\n        image: tutum/curl\n</code></pre>"},{"location":"reference/injector/#envoy-injection-for-virtual-gateways","title":"Envoy injection for virtual gateways","text":"<p>AWS App Mesh supports virtual gateway resource to allow resources that are outside of your mesh to communicate to resources that are inside of your mesh. The virtual gateway represents an Envoy proxy running in the Kubernetes cluster. Unlike a virtual node, which represents Envoy running with an application, a virtual gateway represents Envoy deployed by itself. App Mesh Kubernetes controller supports injecting Envoy and virtual gateway configuration.</p> <p>App Mesh Kubernetes controller uses podSelector to designate Virtual Gateway membership. If you create a pod with labels matching the pod selector labels in a virtual gateway spec, the controller will inject the Envoy configuration to the pod/envoy container and override the default container image by default.</p> <p>Also, since a pod may contain multiple containers, the controller relies on the container name <code>envoy</code> to determine, which container to mutate for virtual gateway configuration.</p> <p>To use the controller to inject virtual gateway configuration, add podSelector to your virtual gateway, add namespaceSelector label where you need to create the virtual gateway and set the container name to <code>envoy</code>:</p> <pre><code>apiVersion: appmesh.k8s.aws/v1beta2\nkind: VirtualGateway\nmetadata:\n  name: ingress-gw\n  namespace: ns\nspec:\n  namespaceSelector:\n    matchLabels:\n      gateway: ingress-gw\n  podSelector:\n    matchLabels:\n      app: ingress-gw\n  listeners:\n    - portMapping:\n        port: 8088\n        protocol: http\n</code></pre> <p>Add the labels in your virtual gateway pod spec:</p> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: ingress-gw\n  namespace: ns\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: ingress-gw\n  template:\n    metadata:\n      labels:\n        app: ingress-gw\n    spec:\n      containers:\n        - name: envoy\n          image: &lt;envoy-image&gt;\n          ports:\n            - containerPort: 8088\n</code></pre>"},{"location":"reference/injector/#skip-overriding-envoy-image","title":"Skip overriding Envoy image","text":"<p>If you wish to skip the Envoy image override, you can add the annotation <code>appmesh.k8s.aws/virtualGatewaySkipImageOverride</code> to your pod spec. This will make sure only virtual gateway configuration is added and Envoy image url override is skipped, allowing you to use custom image version.</p> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: ingress-gw\n  namespace: ns\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: ingress-gw\n  template:\n    metadata:\n      annotations:\n        appmesh.k8s.aws/virtualGatewaySkipImageOverride: enabled\n      labels:\n        app: ingress-gw\n    spec:\n      containers:\n        - name: envoy\n          image: &lt;envoy-image&gt;\n          ports:\n            - containerPort: 8088\n</code></pre>"},{"location":"reference/injector/#custom-environment-variables-for-envoy","title":"Custom Environment Variables For Envoy","text":"<p>Additional environment variables can be passed to the envoy sidecar container by adding an <code>appmesh.k8s.aws/sidecarEnv</code> annotation to the application's deployment:</p> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\nname: ingress-gw\nnamespace: ns\nspec:\ntemplate:\nmetadata:\nannotations:\nappmesh.k8s.aws/sidecarEnv: \"CUSTOM_VAR=value1\"\n</code></pre> <p>Multiple variables can be set by passing a comma-delimited list - <code>appmesh.k8s.aws/sidecarEnv: \"CUSTOM_VAR_1=a, CUSTOM_VAR_2=b\"</code>.</p>"},{"location":"reference/vgw/","title":"VirtualGateway CRD","text":""},{"location":"reference/vgw/#gatewayroute-to-virtualgateway-association-via-yaml-spec","title":"GatewayRoute to VirtualGateway Association via (Yaml Spec)","text":"<p>A VirtualGateway can select GatewayRoute using following selectors  </p>"},{"location":"reference/vgw/#namespaceselector","title":"namespaceSelector","text":"<p>VirtualGateway must specify namespaceSelector to associate GatewayRoutes belonging to a particular namespace. An empty namespaceSelector would target GatewayRoutes in all namespaces. While nil or not specifying any namespace selector would not select any GatewayRoutes.</p>"},{"location":"reference/vgw/#gatewayrouteselector","title":"gatewayRouteSelector","text":"<p>VirtualGateway can additionally specify gatewayRouteSelector to select subset of GatewayRoutes in a given namespace.  An empty or not specifying this field (nil) will select all GatewayRoutes in a given namespace. If specified then it will select only those GatewayRoutes which have the matching labels. </p> <p>Here is a sample spec with 1 VirtualGateway and 2 GatewayRoutes. Here VirtualGateway specified a gatewayRouteSelector, based on which only one of the GatewayRoutes get selected.</p> <pre><code>apiVersion: appmesh.k8s.aws/v1beta2\nkind: VirtualGateway\nmetadata:\n  name: ingress-gw\n  namespace: ${APP_NAMESPACE}\nspec:\n  namespaceSelector:\n    matchLabels:\n      gateway: ingress-gw\n  gatewayRouteSelector:\n    matchLabels:\n      gateway: ingress-gw\n  podSelector:\n    matchLabels:\n      app: ingress-gw\n  listeners:\n    - portMapping:\n        port: 8088\n        protocol: http\n---\napiVersion: appmesh.k8s.aws/v1beta2\nkind: GatewayRoute\nmetadata:\n  name: gateway-route-headers\n  namespace: ${APP_NAMESPACE}\nspec:\n  httpRoute:\n    match:\n      prefix: \"/headers\"\n    action:\n      target:\n        virtualService:\n          virtualServiceRef:\n            name: color-headers\n---\napiVersion: appmesh.k8s.aws/v1beta2\nkind: GatewayRoute\nmetadata:\n  name: gateway-route-paths\n  namespace: ${APP_NAMESPACE}\n  labels:\n    gateway: ingress-gw\nspec:\n  httpRoute:\n    match:\n      prefix: \"/paths\"\n    action:\n      target:\n        virtualService:\n          virtualServiceRef:\n            name: color-paths\n----\n</code></pre> <p>Since the GatewayRoute: gateway-route-headers doesn't have any matching VirtualGateway, customers will see following error message <pre><code>failed to find matching virtualGateway for gatewayRoute: gateway-route-headers, expecting 1 but found 0\n</code></pre></p> <p>The above error message is to only notify the user that the GatewayRoute in the error message has not been associated with any VirtualGateway. So the user should either add matching gatewayRouteSelector to the unmatched gatewayRoute or completely remove the gatewayRouteSelector so that the VirtualGateway ignores this field and uses only the namespaceSelector. </p>"},{"location":"tutorials/walkthroughs/","title":"App Mesh EKS Walkthroughs","text":"<ul> <li>howto-k8s-alb: This example shows how to use AWS Load Balancer Controller with targets registered as virtual-nodes under App Mesh.</li> <li>howto-k8s-cloudmap: This example shows how Kubernetes deployments can use AWS CloudMap for service-discovery when using App Mesh.</li> <li>howto-k8s-fargate: This example shows how to use AppMesh with EKS on Fargate.</li> <li>howto-k8s-grpc:This example shows how to manage gRPC routes in App Mesh using Kubernetes deployments.</li> <li>howto-k8s-http-headers: This example shows how http routes can use headers for matching incoming requests.</li> <li>howto-k8s-http2: This example shows how to manage HTTP/2 routes in App Mesh using Kubernetes deployments</li> <li>howto-k8s-retry-policy: This example shows how retry-policies can be used to for Kubernetes applications within the context of App Mesh.</li> <li>howto-k8s-ingress-gateway: This example shows how to use App Mesh Virtual Gateways for ingress connectivity towards Kubernetes applications.</li> <li>howto-k8s-tls-file-based: This example shows how to enable TLS encryption between applications in App Mesh using X.509 certificates and mount secrets on Envoy using the injector</li> <li>howto-k8s-outlier-detection: This example shows how to use outlier detection capabilities in AWS App Mesh with EKS</li> <li>howto-k8s-connection-pools: This example shows how to use circuit breaking/connection pool configuration capabilities in AWS App Mesh with EKS</li> <li>howto-k8s-cross-cluster: This example shows how to use App Mesh across kubernetes clusters</li> </ul>"}]}